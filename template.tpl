___TERMS_OF_SERVICE___

By creating or modifying this file you agree to Google Tag Manager's Community
Template Gallery Developer Terms of Service available at
https://developers.google.com/tag-manager/gallery-tos (or such other URL as
Google may provide), as modified from time to time.


___INFO___

{
  "type": "TAG",
  "id": "cvt_temp_public_id",
  "version": 1,
  "securityGroups": [],
  "displayName": "Freshpaint",
  "categories": ["ANALYTICS"],
  "brand": {
    "id": "brand_dummy",
    "displayName": "",
    "thumbnail": "data:image/png;base64,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\u003d"
  },
  "description": "Template for delivering tag events via Freshpaint destinations",
  "containerContexts": ["WEB"]
}


___TEMPLATE_PARAMETERS___

[
  {
    "type": "SELECT",
    "name": "tagType",
    "displayName": "Freshpaint Tag Type",
    "simpleValueType": true,
    "valueValidators": [
      {
        "type": "NON_EMPTY"
      }
    ],
    "notSetText": "-",
    "enablingConditions": [],
    "selectItems": [
      {
        "value": "ga4Event",
        "displayValue": "Google Analytics 4 (Proxy)"
      },
      {
        "value": "googleAdsEvent",
        "displayValue": "Google Ads"
      },
      {
        "value": "googleAdsCallConversionsEvent",
        "displayValue": "Google Ads Call Conversions"
      },
      {
        "value": "googleAdsConversionApiEvent",
        "displayValue": "Google Ads Conversion API"
      },
      {
        "value": "googleCM360Event",
        "displayValue": "Google Campaign Manager 360 Conversions API"
      },
      {
        "value": "fbPixelEvent",
        "displayValue": "Facebook Conversions API"
      },
      {
        "value": "basisEvent",
        "displayValue": "Basis"
      },
      {
        "value": "viantEvent",
        "displayValue": "Viant"
      },
      {
        "value": "linkedInAdsCAPIEvent",
        "displayValue": "LinkedIn Ads Conversions API"
      },
      {
        "value": "mntnEvent",
        "displayValue": "MNTN"
      },
      {
        "value": "bingAdsEvent",
        "displayValue": "Bing Ads"
      },
      {
        "value": "impactEvent",
        "displayValue": "impact.com"
      },
      {
        "value": "snapchatEvent",
        "displayValue": "Snapchat"
      },
      {
        "value": "stackAdaptEvent",
        "displayValue": "StackAdapt"
      },
      {
        "value": "theTradeDeskEvent",
        "displayValue": "theTradeDesk"
      },
      {
        "value": "tikTokAdsEvent",
        "displayValue": "TikTok Ads"
      },
      {
        "value": "pinterestAdsEvent",
        "displayValue": "Pinterest Ads"
      },
      {
        "value": "redditAdsEvent",
        "displayValue": "Reddit Ads"
      },
      {
        "value": "siriusXMEvent",
        "displayValue": "SiriusXM"
      },
      {
        "value": "spotifyCAPIEvent",
        "displayValue": "Spotify Conversions API"
      },
      {
        "value": "twitterAdsEvent",
        "displayValue": "Twitter Ads"
      },
      {
        "value": "addEventProperties",
        "displayValue": "AddEventProperties"
      },
      {
        "value": "identify",
        "displayValue": "Identify"
      },
      {
        "value": "track",
        "displayValue": "Track"
      },
      {
        "value": "linkedInAdsEvent",
        "displayValue": "LinkedIn Ads - DEPRECATED - instead use LinkedIn Ads Conversions API"
      },
      {
        "value": "floodlightEvent",
        "displayValue": "Floodlight - DEPRECATED - instead use Google Campaign Manager 360 Conversions API"
      }
    ],
    "macrosInSelect": false
  },
  {
    "type": "TEXT",
    "name": "basisInstanceName",
    "displayName": "Specific Pixel ID (optional)",
    "help": "If multiple Pixel IDs are configured for the Basis destination type, specify one to deliver to (if left blank, this event will be delivered to all configured Pixel IDs)",
    "simpleValueType": true,
    "enablingConditions": [
      {
        "paramName": "tagType",
        "paramValue": "basisEvent",
        "type": "EQUALS"
      }
    ]
  },
  {
    "type": "TEXT",
    "name": "bingAdsInstanceName",
    "displayName": "Specific Tag ID (optional)",
    "help": "If multiple Tag IDs are configured for the Bing Ads destination type, specify one to deliver to (if left blank, this event will be delivered to all configured Tag IDs)",
    "simpleValueType": true,
    "enablingConditions": [
      {
        "paramName": "tagType",
        "paramValue": "bingAdsEvent",
        "type": "EQUALS"
      }
    ]
  },
  {
    "type": "TEXT",
    "name": "googleCM360InstanceName",
    "displayName": "Specific Advertiser ID (optional)",
    "help": "If multiple Advertiser IDs are configured for the Google Campaign Manager 360 Conversions API destination type, specify one to deliver to (if left blank, this event will be delivered to all configured Conversion IDs)",
    "simpleValueType": true,
    "enablingConditions": [
      {
        "paramName": "tagType",
        "paramValue": "googleCM360Event",
        "type": "EQUALS"
      }
    ]
  },
  {
    "type": "TEXT",
    "name": "fbInstanceNames",
    "displayName": "Specific Pixel ID(s) (optional)",
    "help": "If multiple Pixel IDs are configured for the Facebook Conversions API destination type, specify one or more specific Pixel IDs, comma delimited, to deliver to (if left blank, this event will be delivered to all configured Pixel IDs)",
    "simpleValueType": true,
    "enablingConditions": [
      {
        "paramName": "tagType",
        "paramValue": "fbPixelEvent",
        "type": "EQUALS"
      }
    ]
  },
  {
    "type": "TEXT",
    "name": "floodlightInstanceName",
    "displayName": "Specific Advertiser ID (optional)",
    "help": "If multiple Advertiser IDs are configured for the Floodlight destination type, specify one to deliver to (if left blank, this event will be delivered to all configured Advertiser IDs)",
    "simpleValueType": true,
    "enablingConditions": [
      {
        "paramName": "tagType",
        "paramValue": "floodlightEvent",
        "type": "EQUALS"
      }
    ]
  },
  {
    "type": "TEXT",
    "name": "ga4InstanceNames",
    "displayName": "Specific Measurement ID(s) (optional)",
    "help": "If multiple Measurement IDs are configured for the Google Analytics 4 Proxy destination type, specify one or more specific Measurement IDs, comma delimited, to deliver to (if left blank, this event will be delivered to all configured Measurement IDs)",
    "simpleValueType": true,
    "enablingConditions": [
      {
        "paramName": "tagType",
        "paramValue": "ga4Event",
        "type": "EQUALS"
      }
    ]
  },
  {
    "type": "TEXT",
    "name": "googleAdsInstanceName",
    "displayName": "Specific Conversion ID (optional)",
    "help": "If multiple Conversion IDs are configured for the Google Ads destination type, specify one to deliver to (if left blank, this event will be delivered to all configured Conversion IDs)",
    "simpleValueType": true,
    "valueValidators": [],
    "enablingConditions": [
      {
        "paramName": "tagType",
        "paramValue": "googleAdsEvent",
        "type": "EQUALS"
      }
    ]
  },
  {
    "type": "TEXT",
    "name": "commonInstanceId",
    "displayName": "Instance ID",
    "help": "If multiple instances are configured for this destination type, specify one to deliver to (if left blank, this event will be delivered to all configured instances)",
    "simpleValueType": true,
    "enablingConditions": [
      {
        "paramName": "tagType",
        "paramValue": "googleAdsConversionApiEvent",
        "type": "EQUALS"
      },
      {
        "paramName": "tagType",
        "paramValue": "mntnEvent",
        "type": "EQUALS"
      },
      {
        "paramName": "tagType",
        "paramValue": "pinterestAdsEvent",
        "type": "EQUALS"
      },
      {
        "paramName": "tagType",
        "paramValue": "siriusXMEvent",
        "type": "EQUALS"
      },
      {
        "paramName": "tagType",
        "paramValue": "snapchatEvent",
        "type": "EQUALS"
      },
      {
        "paramName": "tagType",
        "paramValue": "spotifyCAPIEvent",
        "type": "EQUALS"
      }
    ]
  },
  {
    "type": "TEXT",
    "name": "linkedInAdsCAPIInstanceName",
    "displayName": "Specific Instance ID (optional)",
    "help": "If multiple instances are configured for the LinkedIn CAPI integration type, specify one to deliver to (if left blank, this event will be delivered to all configured integrations)",
    "simpleValueType": true,
    "enablingConditions": [
      {
        "paramName": "tagType",
        "paramValue": "linkedInAdsCAPIEvent",
        "type": "EQUALS"
      }
    ]
  },
  {
    "type": "TEXT",
    "name": "redditAdsInstanceName",
    "displayName": "Specific Account ID (optional)",
    "help": "If multiple Account IDs are configured for the Reddit Ads destination type, specify one to deliver to (if left blank, this event will be delivered to all configured Account IDs)",
    "simpleValueType": true,
    "enablingConditions": [
      {
        "paramName": "tagType",
        "paramValue": "redditAdsEvent",
        "type": "EQUALS"
      }
    ]
  },
  {
    "type": "TEXT",
    "name": "theTradeDeskInstanceName",
    "displayName": "Specific Advertiser ID (optional)",
    "help": "If multiple Advertiser IDs are configured for theTradeDesk destination type, specify one to deliver to (if left blank, this event will be delivered to all configured Advertiser IDs)",
    "simpleValueType": true,
    "enablingConditions": [
      {
        "paramName": "tagType",
        "paramValue": "theTradeDeskEvent",
        "type": "EQUALS"
      }
    ]
  },
  {
    "type": "TEXT",
    "name": "tikTokAdsInstanceNames",
    "displayName": "Specific Pixel ID(s) (optional)",
    "help": "If multiple Pixel IDs are configured for the TikTok Ads API destination type, specify one or more specific Pixel IDs, comma delimited, to deliver to (if left blank, this event will be delivered to all configured Pixel IDs)",
    "simpleValueType": true,
    "enablingConditions": [
      {
        "paramName": "tagType",
        "paramValue": "tikTokAdsEvent",
        "type": "EQUALS"
      }
    ]
  },
  {
    "type": "TEXT",
    "name": "viantInstanceName",
    "displayName": "Specific Advertiser ID (optional)",
    "help": "If multiple Advertiser IDs are configured for the Viant destination type, specify one to deliver to (if left blank, this event will be delivered to all configured Advertiser IDs)",
    "simpleValueType": true,
    "enablingConditions": [
      {
        "paramName": "tagType",
        "paramValue": "viantEvent",
        "type": "EQUALS"
      }
    ]
  },
  {
    "type": "TEXT",
    "name": "commonEventName",
    "displayName": "Freshpaint Event Name",
    "help": "This will be the event name that you see in Freshpaint - it is sent to only certain destinations, including Google Analytics 4 (Proxy).",
    "simpleValueType": true,
    "valueValidators": [
      {
        "type": "NON_EMPTY"
      }
    ],
    "enablingConditions": [
      {
        "paramName": "tagType",
        "paramValue": "track",
        "type": "EQUALS"
      },
      {
        "paramName": "tagType",
        "paramValue": "basisEvent",
        "type": "EQUALS"
      },
      {
        "paramName": "tagType",
        "paramValue": "googleCM360Event",
        "type": "EQUALS"
      },
      {
        "paramName": "tagType",
        "paramValue": "floodlightEvent",
        "type": "EQUALS"
      },
      {
        "paramName": "tagType",
        "paramValue": "ga4Event",
        "type": "EQUALS"
      },
      {
        "paramName": "tagType",
        "paramValue": "googleAdsEvent",
        "type": "EQUALS"
      },
      {
        "paramName": "tagType",
        "paramValue": "googleAdsConversionApiEvent",
        "type": "EQUALS"
      },
      {
        "paramName": "tagType",
        "paramValue": "linkedInAdsEvent",
        "type": "EQUALS"
      },
      {
        "paramName": "tagType",
        "paramValue": "linkedInAdsCAPIEvent",
        "type": "EQUALS"
      },
      {
        "paramName": "tagType",
        "paramValue": "mntnEvent",
        "type": "EQUALS"
      },
      {
        "paramName": "tagType",
        "paramValue": "pinterestAdsEvent",
        "type": "EQUALS"
      },
      {
        "paramName": "tagType",
        "paramValue": "redditAdsEvent",
        "type": "EQUALS"
      },
      {
        "paramName": "tagType",
        "paramValue": "siriusXMEvent",
        "type": "EQUALS"
      },
      {
        "paramName": "tagType",
        "paramValue": "snapchatEvent",
        "type": "EQUALS"
      },
      {
        "paramName": "tagType",
        "paramValue": "spotifyCAPIEvent",
        "type": "EQUALS"
      },
      {
        "paramName": "tagType",
        "paramValue": "stackAdaptEvent",
        "type": "EQUALS"
      },
      {
        "paramName": "tagType",
        "paramValue": "theTradeDeskEvent",
        "type": "EQUALS"
      },
      {
        "paramName": "tagType",
        "paramValue": "twitterAdsEvent",
        "type": "EQUALS"
      },
      {
        "paramName": "tagType",
        "paramValue": "viantEvent",
        "type": "EQUALS"
      }
    ]
  },
  {
    "type": "TEXT",
    "name": "identifyIdentifier",
    "displayName": "Identifier (recommended)",
    "simpleValueType": true,
    "enablingConditions": [
      {
        "paramName": "tagType",
        "paramValue": "identify",
        "type": "EQUALS"
      }
    ]
  },
  {
    "type": "SIMPLE_TABLE",
    "name": "addEventPropertiesSharedProperties",
    "displayName": "Shared Event Properties",
    "help": "Any properties that should be included with all events going forward.",
    "valueValidators": [
      {
        "type": "TABLE_ROW_COUNT",
        "args": [
          1
        ]
      }
    ],
    "enablingConditions": [
      {
        "paramName": "tagType",
        "paramValue": "addEventProperties",
        "type": "EQUALS"
      }
    ],
    "simpleTableColumns": [
      {
        "defaultValue": "",
        "displayName": "Property Name",
        "name": "name",
        "type": "TEXT"
      },
      {
        "defaultValue": "",
        "displayName": "Property Value",
        "name": "value",
        "type": "TEXT"
      }
    ]
  },
  {
    "type": "SELECT",
    "name": "bingEventType",
    "displayName": "Track Type",
    "help": "Select \"Page View\" only when your Freshpaint Bing Ads configuration has \"Automatically Send Page View Events\" unchecked",
    "simpleValueType": true,
    "valueValidators": [
      {
        "type": "NON_EMPTY"
      }
    ],
    "notSetText": "-",
    "enablingConditions": [
      {
        "paramName": "tagType",
        "paramValue": "bingAdsEvent",
        "type": "EQUALS"
      }
    ],
    "selectItems": [
      {
        "value": "CUSTOM_PAGE_LOAD",
        "displayValue": "Page View"
      },
      {
        "value": "VARIABLE_REVENUE",
        "displayValue": "Variable revenue for destination URL"
      },
      {
        "value": "CUSTOM",
        "displayValue": "Custom conversion"
      },
      {
        "value": "ecommerce",
        "displayValue": "Vertical: Ecommerce"
      },
      {
        "value": "hotel",
        "displayValue": "Vertical: Hotel"
      },
      {
        "value": "travel",
        "displayValue": "Vertical: Travel"
      },
      {
        "value": "userDefined",
        "displayValue": "Define your own"
      }
    ],
    "macrosInSelect": false
  },
  {
    "type": "SELECT",
    "name": "bingEventAction",
    "displayName": "Event action",
    "help": "If you select \"Custom\" and then leave the \"Define your own event action\" field blank, an empty event action value will be sent",
    "simpleValueType": true,
    "enablingConditions": [
      {
        "paramName": "bingEventType",
        "paramValue": "ecommerce",
        "type": "EQUALS"
      },
      {
        "paramName": "bingEventType",
        "paramValue": "hotel",
        "type": "EQUALS"
      },
      {
        "paramName": "bingEventType",
        "paramValue": "travel",
        "type": "EQUALS"
      }
    ],
    "selectItems": [
      {
        "value": "",
        "displayValue": "Custom (input action name manually)"
      },
      {
        "value": "add_payment_info",
        "displayValue": "Add payment info (add_payment_info)"
      },
      {
        "value": "add_to_cart",
        "displayValue": "Add to cart (add_to_cart)"
      },
      {
        "value": "add_to_wishlist",
        "displayValue": "Add to wishlist (add_to_wishlist)"
      },
      {
        "value": "begin_checkout",
        "displayValue": "Begin checkout (begin_checkout)"
      },
      {
        "value": "checkout_progress",
        "displayValue": "Checkout progress (checkout_progress)"
      },
      {
        "value": "exception",
        "displayValue": "Exception (exception)"
      },
      {
        "value": "generate_lead",
        "displayValue": "Generate lead (generate_lead)"
      },
      {
        "value": "login",
        "displayValue": "Log in (login)"
      },
      {
        "value": "purchase",
        "displayValue": "Purchase (purchase)"
      },
      {
        "value": "refund",
        "displayValue": "Refund (refund)"
      },
      {
        "value": "remove_from_cart",
        "displayValue": "Remove from cart (remove_from_cart)"
      },
      {
        "value": "screen_view",
        "displayValue": "Screen view (screen_view)"
      },
      {
        "value": "search",
        "displayValue": "Search (search)"
      },
      {
        "value": "select_content",
        "displayValue": "Select content (select_content)"
      },
      {
        "value": "set_checkout_option",
        "displayValue": "Set checkout option (set_checkout_option)"
      },
      {
        "value": "share",
        "displayValue": "Share (share)"
      },
      {
        "value": "sign_up",
        "displayValue": "Sign up (sign_up)"
      },
      {
        "value": "view_item",
        "displayValue": "View item (view_item)"
      },
      {
        "value": "view_item_list",
        "displayValue": "View item list (view_item_list)"
      },
      {
        "value": "view_promotion",
        "displayValue": "View promotion (view_promotion)"
      },
      {
        "value": "view_search_results",
        "displayValue": "View search results (view_search_results)"
      }
    ],
    "macrosInSelect": true
  },
  {
    "type": "TEXT",
    "name": "bingCustomEventAction",
    "displayName": "Define your own event action",
    "simpleValueType": true,
    "enablingConditions": [
      {
        "paramName": "bingEventType",
        "paramValue": "CUSTOM",
        "type": "EQUALS"
      },
      {
        "paramName": "bingEventType",
        "paramValue": "userDefined",
        "type": "EQUALS"
      },
      {
        "paramName": "bingEventAction",
        "paramValue": "",
        "type": "EQUALS"
      }
    ]
  },
  {
    "type": "TEXT",
    "name": "bingEventCategory",
    "displayName": "Event category",
    "simpleValueType": true,
    "enablingConditions": [
      {
        "paramName": "bingEventType",
        "paramValue": "CUSTOM",
        "type": "EQUALS"
      }
    ]
  },
  {
    "type": "TEXT",
    "name": "bingEventLabel",
    "displayName": "Event label",
    "simpleValueType": true,
    "enablingConditions": [
      {
        "paramName": "bingEventType",
        "paramValue": "CUSTOM",
        "type": "EQUALS"
      }
    ]
  },
  {
    "type": "TEXT",
    "name": "bingEventValue",
    "displayName": "Event value",
    "simpleValueType": true,
    "enablingConditions": [
      {
        "paramName": "bingEventType",
        "paramValue": "CUSTOM",
        "type": "EQUALS"
      }
    ]
  },
  {
    "type": "TEXT",
    "name": "bingCurrency",
    "displayName": "Currency",
    "help": "Currency value must be ISO standard currency code",
    "simpleValueType": true,
    "defaultValue": "USD",
    "enablingConditions": [
      {
        "paramName": "bingEventType",
        "paramValue": "VARIABLE_REVENUE",
        "type": "EQUALS"
      },
      {
        "paramName": "bingEventType",
        "paramValue": "CUSTOM",
        "type": "EQUALS"
      },
      {
        "paramName": "bingEventType",
        "paramValue": "hotel",
        "type": "EQUALS"
      }
    ]
  },
  {
    "type": "TEXT",
    "name": "bingRevenue",
    "displayName": "Revenue Value",
    "simpleValueType": true,
    "enablingConditions": [
      {
        "paramName": "bingEventType",
        "paramValue": "VARIABLE_REVENUE",
        "type": "EQUALS"
      },
      {
        "paramName": "bingEventType",
        "paramValue": "CUSTOM",
        "type": "EQUALS"
      }
    ]
  },
  {
    "type": "GROUP",
    "name": "bingEcomParams",
    "displayName": "Ecommerce event parameters",
    "enablingConditions": [
      {
        "paramName": "bingEventType",
        "paramValue": "ecommerce",
        "type": "EQUALS"
      }
    ],
    "subParams": [
      {
        "type": "TEXT",
        "name": "bingEcommProdId",
        "displayName": "Retail product ID",
        "simpleValueType": true
      },
      {
        "type": "SELECT",
        "name": "bingEcommPagetype",
        "displayName": "Retail page type",
        "help": "The pagetype parameter is required when you include the prodid parameter.",
        "simpleValueType": true,
        "selectItems": [
          {
            "value": "home",
            "displayValue": "Home"
          },
          {
            "value": "searchresults",
            "displayValue": "Search Results"
          },
          {
            "value": "category",
            "displayValue": "Category"
          },
          {
            "value": "product",
            "displayValue": "Product"
          },
          {
            "value": "cart",
            "displayValue": "Cart"
          },
          {
            "value": "purchase",
            "displayValue": "Purchase"
          },
          {
            "value": "other",
            "displayValue": "Other"
          }
        ],
        "macrosInSelect": true
      },
      {
        "type": "TEXT",
        "name": "bingEcommTotalValue",
        "displayName": "Retail total value",
        "simpleValueType": true
      },
      {
        "type": "TEXT",
        "name": "bingEcommCategory",
        "displayName": "Retail category",
        "simpleValueType": true
      }
    ],
    "groupStyle": "NO_ZIPPY"
  },
  {
    "type": "GROUP",
    "name": "bingHotelParams",
    "displayName": "Hotel event parameters",
    "enablingConditions": [
      {
        "paramName": "bingEventType",
        "paramValue": "hotel",
        "type": "EQUALS"
      }
    ],
    "subParams": [
      {
        "type": "TEXT",
        "name": "bingHctBasePrice",
        "displayName": "Hotel base price",
        "simpleValueType": true
      },
      {
        "type": "TEXT",
        "name": "bingHctBookingXref",
        "displayName": "Hotel booking reference #",
        "simpleValueType": true
      },
      {
        "type": "TEXT",
        "name": "bingHctCheckinDate",
        "displayName": "Hotel check-in date",
        "help": "Value must be in YYYY-MM-DD date format",
        "simpleValueType": true
      },
      {
        "type": "TEXT",
        "name": "bingHctCheckoutDate",
        "displayName": "Hotel check-out date",
        "help": "Value must be in YYYY-MM-DD date format",
        "simpleValueType": true
      },
      {
        "type": "TEXT",
        "name": "bingHctLengthOfStay",
        "displayName": "Hotel length of stay",
        "simpleValueType": true
      },
      {
        "type": "TEXT",
        "name": "bingHctPartnerHotelId",
        "displayName": "Partner hotel ID",
        "simpleValueType": true
      },
      {
        "type": "TEXT",
        "name": "bingHctTotalPrice",
        "displayName": "Hotel total price",
        "simpleValueType": true
      },
      {
        "type": "SELECT",
        "name": "bingHctPagetype",
        "displayName": "Hotel page type",
        "simpleValueType": true,
        "selectItems": [
          {
            "value": "home",
            "displayValue": "Home"
          },
          {
            "value": "searchresults",
            "displayValue": "Search Results"
          },
          {
            "value": "offerdetail",
            "displayValue": "Offer Detail"
          },
          {
            "value": "conversionintent",
            "displayValue": "Conversion Intent"
          },
          {
            "value": "conversion",
            "displayValue": "Conversion"
          },
          {
            "value": "property",
            "displayValue": "Property"
          },
          {
            "value": "cart",
            "displayValue": "Cart"
          },
          {
            "value": "purchase",
            "displayValue": "Purchase"
          },
          {
            "value": "cancel",
            "displayValue": "Cancel"
          },
          {
            "value": "other",
            "displayValue": "Other"
          }
        ],
        "macrosInSelect": true
      },
      {
        "type": "LABEL",
        "name": "bingHotelLabel",
        "displayName": "The hotel total price (hct_total_price) and currency parameters are required when you include other hotel parameters."
      }
    ],
    "groupStyle": "NO_ZIPPY"
  },
  {
    "type": "GROUP",
    "name": "bingTravelParams",
    "displayName": "Travel event parameters",
    "enablingConditions": [
      {
        "paramName": "bingEventType",
        "paramValue": "travel",
        "type": "EQUALS"
      }
    ],
    "subParams": [
      {
        "type": "TEXT",
        "name": "bingTravelDestid",
        "displayName": "Travel destination ID",
        "simpleValueType": true
      },
      {
        "type": "TEXT",
        "name": "bingTravelOriginid",
        "displayName": "Travel origin ID",
        "simpleValueType": true
      },
      {
        "type": "SELECT",
        "name": "bingTravelPagetype",
        "displayName": "Travel page type",
        "simpleValueType": true,
        "selectItems": [
          {
            "value": "home",
            "displayValue": "Home"
          },
          {
            "value": "searchresults",
            "displayValue": "Search Results"
          },
          {
            "value": "offerdetail",
            "displayValue": "Offer Detail"
          },
          {
            "value": "conversionintent",
            "displayValue": "Conversion Intent"
          },
          {
            "value": "conversion",
            "displayValue": "Conversion"
          },
          {
            "value": "cancel",
            "displayValue": "Cancel"
          },
          {
            "value": "other",
            "displayValue": "Other"
          }
        ],
        "macrosInSelect": true
      },
      {
        "type": "TEXT",
        "name": "bingTravelStartdate",
        "displayName": "Travel start date",
        "help": "Value must be in YYYY-MM-DD date format",
        "simpleValueType": true
      },
      {
        "type": "TEXT",
        "name": "bingTravelEnddate",
        "displayName": "Travel end date",
        "help": "Value must be in YYYY-MM-DD date format",
        "simpleValueType": true
      },
      {
        "type": "TEXT",
        "name": "bingTravelTotalvalue",
        "displayName": "Travel total value",
        "simpleValueType": true
      }
    ],
    "groupStyle": "NO_ZIPPY"
  },
  {
    "type": "TEXT",
    "name": "bingPagePath",
    "displayName": "Page path",
    "help": "Must start with a '/', ex: '/spa_page'",
    "simpleValueType": true,
    "enablingConditions": [
      {
        "paramName": "bingEventType",
        "paramValue": "pageViewSPA",
        "type": "EQUALS"
      }
    ]
  },
  {
    "type": "TEXT",
    "name": "bingPageTitle",
    "displayName": "Page title",
    "help": "Can leave empty to re-use document title",
    "simpleValueType": true,
    "enablingConditions": [
      {
        "paramName": "bingEventType",
        "paramValue": "pageViewSPA",
        "type": "EQUALS"
      }
    ]
  },
  {
    "type": "TEXT",
    "name": "googleCM360ActivityIDString",
    "displayName": "Activity ID",
    "help": "This is the Floodlight Activity ID (typically numeric) that conversions will be associated with. It differs from the Floodlight Activity tag string used by the native Floodlight Counter tag.",
    "simpleValueType": true,
    "valueValidators": [
      {
        "type": "NON_EMPTY"
      }
    ],
    "enablingConditions": [
      {
        "paramName": "tagType",
        "paramValue": "googleCM360Event",
        "type": "EQUALS"
      }
    ]
  },
  {
    "type": "SIMPLE_TABLE",
    "name": "googleCM360EventProperties",
    "displayName": "Event Properties",
    "help": "Google Campaign Manager 360 Conversions API accepts custom properties of the form u1, u2, etc (up to u100), as well as several additional properties. See Freshpaint documentation for a detailed list of accepted properties.",
    "enablingConditions": [
      {
        "paramName": "tagType",
        "paramValue": "googleCM360Event",
        "type": "EQUALS"
      }
    ],
    "simpleTableColumns": [
      {
        "defaultValue": "",
        "displayName": "Property Name",
        "name": "name",
        "type": "TEXT"
      },
      {
        "defaultValue": "",
        "displayName": "Property Value",
        "name": "value",
        "type": "TEXT"
      }
    ]
  },
  {
    "type": "RADIO",
    "name": "googleCM360FloodlightCountingMethod",
    "displayName": "Counting Method",
    "simpleValueType": true,
    "enablingConditions": [
      {
        "paramName": "tagType",
        "paramValue": "googleCM360Event",
        "type": "EQUALS"
      }
    ],
    "radioItems": [
      {
        "value": "STANDARD",
        "displayValue": "Standard",
        "help": "Count every conversion."
      },
      {
        "value": "UNIQUE",
        "displayValue": "Unique",
        "help": "Count the first conversion for each unique user during each 24-hour day, from midnight to midnight, Eastern Time (US)."
      },
      {
        "value": "SESSION",
        "displayValue": "Per Session",
        "help": "Count one conversion per user per session. Session length is set by the site where the Floodlight tag is deployed."
      }
    ]
  },
  {
    "type": "RADIO",
    "name": "fbEventName",
    "simpleValueType": true,
    "enablingConditions": [
      {
        "paramName": "tagType",
        "paramValue": "fbPixelEvent",
        "type": "EQUALS"
      }
    ],
    "radioItems": [
      {
        "value": "standard",
        "displayValue": "Standard",
        "subParams": [
          {
            "type": "SELECT",
            "name": "fbStandardEventName",
            "simpleValueType": true,
            "defaultValue": "PageView",
            "selectItems": [
              {
                "value": "PageView",
                "displayValue": "PageView"
              },
              {
                "value": "AddPaymentInfo",
                "displayValue": "AddPaymentInfo"
              },
              {
                "value": "AddToCart",
                "displayValue": "AddToCart"
              },
              {
                "value": "AddToWishlist",
                "displayValue": "AddToWishlist"
              },
              {
                "value": "CompleteRegistration",
                "displayValue": "CompleteRegistration"
              },
              {
                "value": "Contact",
                "displayValue": "Contact"
              },
              {
                "value": "CustomizeProduct",
                "displayValue": "CustomizeProduct"
              },
              {
                "value": "Donate",
                "displayValue": "Donate"
              },
              {
                "value": "FindLocation",
                "displayValue": "FindLocation"
              },
              {
                "value": "InitiateCheckout",
                "displayValue": "InitiateCheckout"
              },
              {
                "value": "Lead",
                "displayValue": "Lead"
              },
              {
                "value": "Purchase",
                "displayValue": "Purchase"
              },
              {
                "value": "Schedule",
                "displayValue": "Schedule"
              },
              {
                "value": "Search",
                "displayValue": "Search"
              },
              {
                "value": "StartTrial",
                "displayValue": "StartTrial"
              },
              {
                "value": "SubmitApplication",
                "displayValue": "SubmitApplication"
              },
              {
                "value": "Subscribe",
                "displayValue": "Subscribe"
              },
              {
                "value": "ViewContent",
                "displayValue": "ViewContent"
              }
            ]
          }
        ]
      },
      {
        "value": "custom",
        "displayValue": "Custom",
        "subParams": [
          {
            "type": "TEXT",
            "name": "fbCustomEventName",
            "displayName": "",
            "simpleValueType": true
          }
        ]
      },
      {
        "value": "variable",
        "displayValue": "Variable",
        "subParams": [
          {
            "type": "SELECT",
            "name": "fbVariableEventName",
            "displayName": "",
            "simpleValueType": true,
            "selectItems": [],
            "macrosInSelect": true
          }
        ]
      }
    ]
  },
  {
    "type": "GROUP",
    "name": "fbGroupParams",
    "displayName": "Object Properties",
    "enablingConditions": [
      {
        "paramName": "tagType",
        "paramValue": "fbPixelEvent",
        "type": "EQUALS"
      }
    ],
    "subParams": [
      {
        "type": "SELECT",
        "name": "fbObjectPropertiesFromVariable",
        "displayName": "Load Properties From Variable",
        "help": "You can use a variable that returns a JavaScript object with the properties you want to use. This object will be merged with any additional properties you add via the table below. Any conflicts will be resolved in favor of the properties you add to the table.",
        "simpleValueType": true,
        "selectItems": [
          {
            "value": false,
            "displayValue": "False"
          }
        ],
        "macrosInSelect": true
      },
      {
        "type": "SIMPLE_TABLE",
        "name": "fbObjectPropertyList",
        "simpleTableColumns": [
          {
            "defaultValue": "",
            "displayName": "Property Name",
            "name": "name",
            "type": "TEXT"
          },
          {
            "defaultValue": "",
            "displayName": "Property Value",
            "name": "value",
            "type": "TEXT"
          }
        ],
        "newRowButtonText": "Add property"
      }
    ],
    "groupStyle": "ZIPPY_CLOSED"
  },
  {
    "type": "TEXT",
    "name": "floodlightGroupTagString",
    "displayName": "Group Tag String",
    "help": "This is the value of the \"type=\" parameter.",
    "simpleValueType": true,
    "valueValidators": [
      {
        "type": "NON_EMPTY"
      }
    ],
    "enablingConditions": [
      {
        "paramName": "tagType",
        "paramValue": "floodlightEvent",
        "type": "EQUALS"
      }
    ]
  },
  {
    "type": "TEXT",
    "name": "floodlightActivityTagString",
    "displayName": "Activity Tag String",
    "help": "This is the value of the \"cat=\" parameter.",
    "simpleValueType": true,
    "valueValidators": [
      {
        "type": "NON_EMPTY"
      }
    ],
    "enablingConditions": [
      {
        "paramName": "tagType",
        "paramValue": "floodlightEvent",
        "type": "EQUALS"
      }
    ]
  },
  {
    "type": "RADIO",
    "name": "floodlightCountingMethod",
    "displayName": "Counting Method",
    "simpleValueType": true,
    "enablingConditions": [
      {
        "paramName": "tagType",
        "paramValue": "floodlightEvent",
        "type": "EQUALS"
      }
    ],
    "radioItems": [
      {
        "value": "STANDARD",
        "displayValue": "Standard",
        "help": "Count every conversion."
      },
      {
        "value": "UNIQUE",
        "displayValue": "Unique",
        "help": "Count the first conversion for each unique user during each 24-hour day, from midnight to midnight, Eastern Time (US)."
      },
      {
        "value": "SESSION",
        "displayValue": "Per Session",
        "help": "Count one conversion per user per session. Session length is set by the site where the Floodlight tag is deployed."
      }
    ]
  },
  {
    "type": "PARAM_TABLE",
    "name": "floodlightCustomVariables",
    "displayName": "Custom Variables",
    "help": "Floodlight custom variables are key-value pairs that can be used to track data that you collect about your users, for example the genre of movie that a user purchases. The keys are of the format \"u1=\", \"u2=\", etc.",
    "enablingConditions": [
      {
        "paramName": "tagType",
        "paramValue": "floodlightEvent",
        "type": "EQUALS"
      }
    ],
    "paramTableColumns": [
      {
        "param": {
          "type": "SELECT",
          "name": "key",
          "displayName": "Key",
          "simpleValueType": true,
          "selectItems": [
            {
              "value": "u1",
              "displayValue": "u1"
            },
            {
              "value": "u2",
              "displayValue": "u2"
            }
          ],
          "macrosInSelect": false
        },
        "isUnique": true
      },
      {
        "param": {
          "type": "TEXT",
          "name": "value",
          "displayName": "Value",
          "simpleValueType": true
        },
        "isUnique": false
      }
    ]
  },
  {
    "type": "GROUP",
    "name": "floodlightEnhancedConversionsGroup",
    "displayName": "Enhanced Conversions",
    "enablingConditions": [
      {
        "paramName": "tagType",
        "paramValue": "floodlightEvent",
        "type": "EQUALS"
      }
    ],
    "subParams": [
      {
        "type": "CHECKBOX",
        "name": "floodlightEnhancedConversionsCheckbox",
        "help": "User-provided data allows you to improve the accuracy of your measurement by sending hashed first party user-provided data from your website. You will need to agree to the user-provided data terms and policies in your Search Ads 360 account first.",
        "simpleValueType": true,
        "checkboxText": "Include user-provided data from your website"
      },
      {
        "type": "SELECT",
        "name": "floodlightEnhancedConversionsUserDataVariable",
        "displayName": "User-provided Data Variable",
        "help": "The selected variable should be of type \"User-Provided Data\"",
        "simpleValueType": true,
        "enablingConditions": [
          {
            "paramName": "floodlightEnhancedConversionsCheckbox",
            "paramValue": true,
            "type": "EQUALS"
          }
        ],
        "selectItems": [],
        "macrosInSelect": true
      }
    ],
    "groupStyle": "ZIPPY_CLOSED"
  },
  {
    "type": "TEXT",
    "name": "ga4EventPropsVariable",
    "displayName": "Event Properties Variable",
    "help": "If specified, must be a variable returning an object, such as a Google Tag: Event Settings or Custom JavaScript variable, in {{varname}} format",
    "simpleValueType": true,
    "enablingConditions": [
      {
        "paramName": "tagType",
        "paramValue": "ga4Event",
        "type": "EQUALS"
      }
    ]
  },
  {
    "type": "TEXT",
    "name": "googleAdsCallConversionsDisplayedPhoneNbr",
    "displayName": "Displayed Phone Number to Replace",
    "help": "The phone number you enter needs to have the exact digits it has on your website. For example, if the number on your website has a country code, include the country code here. If the number on your website does not have a country code, do not include the country code here.",
    "simpleValueType": true,
    "valueValidators": [
      {
        "type": "NON_EMPTY"
      }
    ],
    "enablingConditions": [
      {
        "paramName": "tagType",
        "paramValue": "googleAdsCallConversionsEvent",
        "type": "EQUALS"
      }
    ]
  },
  {
    "type": "TEXT",
    "name": "googleAdsConversionLabel",
    "displayName": "Conversion Label",
    "simpleValueType": true,
    "valueValidators": [
      {
        "type": "NON_EMPTY"
      }
    ],
    "enablingConditions": [
      {
        "paramName": "tagType",
        "paramValue": "googleAdsCallConversionsEvent",
        "type": "EQUALS"
      },
      {
        "paramName": "tagType",
        "paramValue": "googleAdsEvent",
        "type": "EQUALS"
      }
    ]
  },
  {
    "type": "TEXT",
    "name": "googleAdsCallConversionsConversionId",
    "displayName": "Conversion ID",
    "simpleValueType": true,
    "valueValidators": [
      {
        "type": "NON_EMPTY"
      }
    ],
    "enablingConditions": [
      {
        "paramName": "tagType",
        "paramValue": "googleAdsCallConversionsEvent",
        "type": "EQUALS"
      }
    ]
  },
  {
    "type": "TEXT",
    "name": "googleAdsConversionValue",
    "displayName": "Conversion Value (optional)",
    "simpleValueType": true,
    "enablingConditions": [
      {
        "paramName": "tagType",
        "paramValue": "googleAdsEvent",
        "type": "EQUALS"
      }
    ]
  },
  {
    "type": "TEXT",
    "name": "googleAdsOrderId",
    "displayName": "Transaction ID (optional)",
    "simpleValueType": true,
    "enablingConditions": [
      {
        "paramName": "tagType",
        "paramValue": "googleAdsEvent",
        "type": "EQUALS"
      }
    ]
  },
  {
    "type": "TEXT",
    "name": "googleAdsCurrencyCode",
    "displayName": "Currency Code (optional)",
    "simpleValueType": true,
    "enablingConditions": [
      {
        "paramName": "tagType",
        "paramValue": "googleAdsEvent",
        "type": "EQUALS"
      }
    ]
  },
  {
    "type": "GROUP",
    "name": "googleAdsEnhancedConversionsGroup",
    "displayName": "Enhanced Conversions",
    "enablingConditions": [
      {
        "paramName": "tagType",
        "paramValue": "googleAdsEvent",
        "type": "EQUALS"
      }
    ],
    "subParams": [
      {
        "type": "CHECKBOX",
        "name": "googleAdsEnhancedConversionsCheckbox",
        "help": "Improve measurement and get more insights with data people provide to your website. You will need to agree to the user-provided data terms and policies in your Google Ads account first.",
        "simpleValueType": true,
        "checkboxText": "Include user-provided data from your website"
      },
      {
        "type": "SELECT",
        "name": "googleAdsEnhancedConversionsUserDataVariable",
        "displayName": "User-provided Data Variable",
        "help": "The selected variable should be of type 'User-Provided Data'",
        "simpleValueType": true,
        "enablingConditions": [
          {
            "paramName": "googleAdsEnhancedConversionsCheckbox",
            "paramValue": true,
            "type": "EQUALS"
          }
        ],
        "selectItems": [],
        "macrosInSelect": true
      }
    ],
    "groupStyle": "ZIPPY_CLOSED"
  },
  {
    "type": "TEXT",
    "name": "googleAdsConversionApiConversionId",
    "displayName": "Conversion ID (ctid)",
    "help": "Enter your Google Ads Conversion ID. This is shown within Google Ads when creating a new Conversion or viewing an existing Conversion, within the \"Use Google Tag Manager\" section.",
    "simpleValueType": true,
    "enablingConditions": [
      {
        "paramName": "tagType",
        "paramValue": "googleAdsConversionApiEvent",
        "type": "EQUALS"
      }
    ]
  },
  {
    "type": "TEXT",
    "name": "googleAdsConversionApiConversionName",
    "displayName": "Conversion Name (ctname)",
    "help": "Enter your Conversion's Name. This is shown in the Conversion Details section within Google Ads.",
    "simpleValueType": true,
    "enablingConditions": [
      {
        "paramName": "tagType",
        "paramValue": "googleAdsConversionApiEvent",
        "type": "EQUALS"
      }
    ]
  },
  {
    "type": "RADIO",
    "name": "impactEventTypeIdOrCodeSelector",
    "displayName": "Use event_type_id vs. event_type_code",
    "help": "One or the other of event_type_id or event_type_code must be specified.",
    "enablingConditions": [
      {
        "paramName": "tagType",
        "paramValue": "impactEvent",
        "type": "EQUALS"
      }
    ],
    "radioItems": [
      {
        "value": "event_type_id",
        "displayValue": "event_type_id"
      },
      {
        "value": "event_type_code",
        "displayValue": "event_type_code"
      }
    ]
  },
  {
    "type": "TEXT",
    "name": "impactEventTypeIdOrCode",
    "displayName": "event_type_id / event_type_code (required)",
    "simpleValueType": true,
    "valueValidators": [
      {
        "type": "NON_EMPTY"
      }
    ],
    "enablingConditions": [
      {
        "paramName": "tagType",
        "paramValue": "impactEvent",
        "type": "EQUALS"
      }
    ]
  },
  {
    "type": "TEXT",
    "name": "impactOrderId",
    "displayName": "order_id (required)",
    "simpleValueType": true,
    "valueValidators": [
      {
        "type": "NON_EMPTY"
      }
    ],
    "enablingConditions": [
      {
        "paramName": "tagType",
        "paramValue": "impactEvent",
        "type": "EQUALS"
      }
    ]
  },
  {
    "type": "PARAM_TABLE",
    "name": "impactOtherEventParameters",
    "displayName": "Other parameters (optional)",
    "enablingConditions": [
      {
        "paramName": "tagType",
        "paramValue": "impactEvent",
        "type": "EQUALS"
      }
    ],
    "paramTableColumns": [
      {
        "param": {
          "type": "SELECT",
          "name": "param_table_key_column",
          "displayName": "property",
          "simpleValueType": true,
          "selectItems": [
            {
              "value": "amount",
              "displayValue": "amount"
            },
            {
              "value": "currency",
              "displayValue": "currency"
            },
            {
              "value": "customer_status",
              "displayValue": "customer_status"
            },
            {
              "value": "discount",
              "displayValue": "discount"
            },
            {
              "value": "email",
              "displayValue": "email"
            },
            {
              "value": "items",
              "displayValue": "items"
            },
            {
              "value": "latitude",
              "displayValue": "latitude"
            },
            {
              "value": "longitude",
              "displayValue": "longitude"
            },
            {
              "value": "order_promo_code",
              "displayValue": "order_promo_code"
            },
            {
              "value": "order_revenue",
              "displayValue": "order_revenue (amount)"
            },
            {
              "value": "order_shipping",
              "displayValue": "order_shipping"
            },
            {
              "value": "order_tax",
              "displayValue": "order_tax"
            },
            {
              "value": "text1",
              "displayValue": "text1"
            },
            {
              "value": "text2",
              "displayValue": "text2"
            },
            {
              "value": "text3",
              "displayValue": "text3"
            },
            {
              "value": "text4",
              "displayValue": "text4"
            },
            {
              "value": "text5",
              "displayValue": "text5"
            },
            {
              "value": "text6",
              "displayValue": "text6"
            },
            {
              "value": "text7",
              "displayValue": "text7"
            },
            {
              "value": "text8",
              "displayValue": "text8"
            },
            {
              "value": "text9",
              "displayValue": "text9"
            },
            {
              "value": "text10",
              "displayValue": "text10"
            }
          ],
          "macrosInSelect": false
        },
        "isUnique": true
      },
      {
        "param": {
          "type": "TEXT",
          "name": "param_table_value_column",
          "displayName": "Value",
          "simpleValueType": true
        },
        "isUnique": false
      }
    ]
  },
  {
    "type": "TEXT",
    "name": "linkedInAdsConversionIds",
    "displayName": "Conversion ID(s) (max. 3)",
    "help": "Enter 1-3 conversion ids separated by a comma.",
    "simpleValueType": true,
    "valueValidators": [
      {
        "type": "NON_EMPTY"
      }
    ],
    "enablingConditions": [
      {
        "paramName": "tagType",
        "paramValue": "linkedInAdsEvent",
        "type": "EQUALS"
      }
    ]
  },
  {
    "type": "TEXT",
    "name": "linkedInAdsCAPIConversionIds",
    "displayName": "Conversion ID(s) (max. 3)",
    "help": "Enter 1-3 conversion ids separated by a comma.",
    "simpleValueType": true,
    "valueValidators": [
      {
        "type": "NON_EMPTY"
      }
    ],
    "enablingConditions": [
      {
        "paramName": "tagType",
        "paramValue": "linkedInAdsCAPIEvent",
        "type": "EQUALS"
      }
    ]
  },
  {
    "type": "SELECT",
    "name": "snapchatEventName",
    "displayName": "Snapchat Event Name",
    "help": "This will be the event_name that is sent to Snapchat.",
    "simpleValueType": true,
    "defaultValue": "PAGE_VIEW",
    "enablingConditions": [
      {
        "paramName": "tagType",
        "paramValue": "snapchatEvent",
        "type": "EQUALS"
      }
    ],
    "selectItems": [
      {
        "value": "PURCHASE",
        "displayValue": "Purchase"
      },
      {
        "value": "SAVE",
        "displayValue": "Save"
      },
      {
        "value": "START_CHECKOUT",
        "displayValue": "Start Checkout"
      },
      {
        "value": "ADD_CART",
        "displayValue": "Add Cart"
      },
      {
        "value": "VIEW_CONTENT",
        "displayValue": "View Content"
      },
      {
        "value": "ADD_BILLING",
        "displayValue": "Add Billing"
      },
      {
        "value": "SIGN_UP",
        "displayValue": "Sign Up"
      },
      {
        "value": "SEARCH",
        "displayValue": "Search"
      },
      {
        "value": "PAGE_VIEW",
        "displayValue": "Page View"
      },
      {
        "value": "SUBSCRIBE",
        "displayValue": "Subscribe"
      },
      {
        "value": "AD_CLICK",
        "displayValue": "Ad Click"
      },
      {
        "value": "AD_VIEW",
        "displayValue": "Ad View"
      },
      {
        "value": "COMPLETE_TUTORIAL",
        "displayValue": "Complete Tutorial"
      },
      {
        "value": "LEVEL_COMPLETE",
        "displayValue": "Level Complete"
      },
      {
        "value": "INVITE",
        "displayValue": "Invite"
      },
      {
        "value": "LOGIN",
        "displayValue": "Login"
      },
      {
        "value": "SHARE",
        "displayValue": "Share"
      },
      {
        "value": "RESERVE",
        "displayValue": "Reserve"
      },
      {
        "value": "ACHIEVEMENT_UNLOCKED",
        "displayValue": "Achievement Unlocked"
      },
      {
        "value": "ADD_TO_WISHLIST",
        "displayValue": "Add To Wishlist"
      },
      {
        "value": "SPENT_CREDITS",
        "displayValue": "Spent Credits"
      },
      {
        "value": "RATE",
        "displayValue": "Rate"
      },
      {
        "value": "START_TRIAL",
        "displayValue": "Start Trial"
      },
      {
        "value": "LIST_VIEW",
        "displayValue": "List View"
      },
      {
        "value": "APP_INSTALL",
        "displayValue": "App Install"
      },
      {
        "value": "APP_OPEN",
        "displayValue": "App Open"
      },
      {
        "value": "CUSTOM_EVENT_1",
        "displayValue": "Custom Event 1"
      },
      {
        "value": "CUSTOM_EVENT_2",
        "displayValue": "Custom Event 2"
      },
      {
        "value": "CUSTOM_EVENT_3",
        "displayValue": "Custom Event 3"
      },
      {
        "value": "CUSTOM_EVENT_4",
        "displayValue": "Custom Event 4"
      },
      {
        "value": "CUSTOM_EVENT_5",
        "displayValue": "Custom Event 5"
      }
    ]
  },
  {
    "type": "SELECT",
    "name": "spotifyCAPIEventName",
    "displayName": "Spotify CAPI Event Name",
    "help": "This will be the event_name that is sent to Spotify.",
    "simpleValueType": true,
    "defaultValue": "PAGE_VIEW",
    "enablingConditions": [
      {
        "paramName": "tagType",
        "paramValue": "spotifyCAPIEvent",
        "type": "EQUALS"
      }
    ],
    "selectItems": [
      {
        "value": "ADD_TO_CART",
        "displayValue": "Add to Cart"
      },
      {
        "value": "ALIAS",
        "displayValue": "Alias"
      },
      {
        "value": "LEAD",
        "displayValue": "Lead"
      },
      {
        "value": "VIEW",
        "displayValue": "Page View"
      },
      {
        "value": "PURCHASE",
        "displayValue": "Purchase"
      },
      {
        "value": "SIGN_UP",
        "displayValue": "Sign Up"
      },
      {
        "value": "PRODUCT",
        "displayValue": "View Product"
      },
      {
        "value": "CHECK_OUT",
        "displayValue": "Start Checkout"
      },
      {
        "value": "CUSTOM_EVENT_1",
        "displayValue": "Custom Event 1"
      },
      {
        "value": "CUSTOM_EVENT_2",
        "displayValue": "Custom Event 2"
      },
      {
        "value": "CUSTOM_EVENT_3",
        "displayValue": "Custom Event 3"
      },
      {
        "value": "CUSTOM_EVENT_4",
        "displayValue": "Custom Event 4"
      },
      {
        "value": "CUSTOM_EVENT_5",
        "displayValue": "Custom Event 5"
      }
    ]
  },
  {
    "type": "TEXT",
    "name": "stackAdaptConversionEventID",
    "displayName": "StackAdapt Conversion Event Unique ID",
    "simpleValueType": true,
    "valueValidators": [
      {
        "type": "NON_EMPTY"
      }
    ],
    "enablingConditions": [
      {
        "paramName": "tagType",
        "paramValue": "stackAdaptEvent",
        "type": "EQUALS"
      }
    ]
  },
  {
    "type": "TEXT",
    "name": "theTradeDeskTrackerOrUPixelIDValue",
    "displayName": "Event Tracker ID",
    "help": "(a.k.a. Tracking Tag ID as used in the Static Tracking Tag)",
    "simpleValueType": true,
    "valueValidators": [
      {
        "type": "NON_EMPTY"
      }
    ],
    "enablingConditions": [
      {
        "paramName": "tagType",
        "paramValue": "theTradeDeskEvent",
        "type": "EQUALS"
      }
    ]
  },
  {
    "type": "TEXT",
    "name": "theTradeDeskValue",
    "displayName": "value",
    "simpleValueType": true,
    "enablingConditions": [
      {
        "paramName": "tagType",
        "paramValue": "theTradeDeskEvent",
        "type": "EQUALS"
      }
    ]
  },
  {
    "type": "TEXT",
    "name": "theTradeDeskPrivacySettings",
    "displayName": "Privacy Settings array (optional)",
    "help": "Privacy Settings array object",
    "simpleValueType": true,
    "enablingConditions": [
      {
        "paramName": "tagType",
        "paramValue": "theTradeDeskEvent",
        "type": "EQUALS"
      }
    ]
  },
  {
    "type": "TEXT",
    "name": "theTradeDeskDataProcessingOption",
    "displayName": "Data Processing Option (optional)",
    "help": "Data Processing Option object",
    "simpleValueType": true,
    "enablingConditions": [
      {
        "paramName": "tagType",
        "paramValue": "theTradeDeskEvent",
        "type": "EQUALS"
      }
    ]
  },
  {
    "type": "TEXT",
    "name": "tikTokAdsEventName",
    "displayName": "TikTok Event Name",
    "help": "Enter the name of the TikTok event you want to track. This can be a standard event name or a custom event name.",
    "simpleValueType": true,
    "valueValidators": [
      {
        "type": "NON_EMPTY"
      }
    ],
    "enablingConditions": [
      {
        "paramName": "tagType",
        "paramValue": "tikTokAdsEvent",
        "type": "EQUALS"
      }
    ]
  },
  {
    "type": "PARAM_TABLE",
    "name": "twitterEventParameters",
    "displayName": "Event Parameters",
    "enablingConditions": [
      {
        "paramName": "tagType",
        "paramValue": "twitterAdsEvent",
        "type": "EQUALS"
      }
    ],
    "paramTableColumns": [
      {
        "param": {
          "type": "SELECT",
          "name": "param_table_key_column",
          "displayName": "Event parameter name",
          "simpleValueType": true,
          "selectItems": [
            {
              "value": "value",
              "displayValue": "'value' - amount of an action valuable to your business, such as a purchase. Example: 12.99"
            },
            {
              "value": "currency",
              "displayValue": "'currency' - use if the 'value' parameter is set. ISO 4217 currency code. Example: USD"
            },
            {
              "value": "content_name",
              "displayValue": "'content_name' - name of the page or product. Example: Promotional User Sign-up Complete"
            },
            {
              "value": "content_category",
              "displayValue": "'content_category' - category of the page or product. Example: 30day Trial"
            },
            {
              "value": "content_ids",
              "displayValue": "'content_ids' - product IDs associated with the Purchase event. Example: ['SKU-AB12','SKU-DE45']."
            },
            {
              "value": "content_type",
              "displayValue": "'content_type' - use either 'product' or 'product_group' based on the content_ids"
            },
            {
              "value": "num_items",
              "displayValue": "'num_items' - number of items associated with the conversion event. Example: 3."
            },
            {
              "value": "order_id",
              "displayValue": "'order_id' - order ID associated with the user's purchase. Example: OID-8767-1"
            }
          ],
          "macrosInSelect": false
        },
        "isUnique": true
      },
      {
        "param": {
          "type": "TEXT",
          "name": "param_table_value_column",
          "displayName": "Value for the event parameter",
          "simpleValueType": true
        },
        "isUnique": false
      }
    ]
  },
  {
    "type": "SIMPLE_TABLE",
    "name": "commonEventPropertiesJSONValue",
    "displayName": "Event Properties",
    "help": "Props named value, quantity, item_count, price, total, revenue, or num_items will be converted to numeric if possible; those named contents, products, or items will be converted to a JSON object / array if possible (keys must be quoted).",
    "enablingConditions": [
      {
        "paramName": "tagType",
        "paramValue": "track",
        "type": "EQUALS"
      },
      {
        "paramName": "tagType",
        "paramValue": "redditAdsEvent",
        "type": "EQUALS"
      }
    ],
    "simpleTableColumns": [
      {
        "defaultValue": "",
        "displayName": "Property Name",
        "name": "name",
        "type": "TEXT"
      },
      {
        "defaultValue": "",
        "displayName": "Property Value",
        "name": "value",
        "type": "TEXT"
      }
    ]
  },
  {
    "type": "SIMPLE_TABLE",
    "name": "commonEventProperties",
    "displayName": "Event Properties",
    "enablingConditions": [
      {
        "paramName": "tagType",
        "paramValue": "basisEvent",
        "type": "EQUALS"
      },
      {
        "paramName": "tagType",
        "paramValue": "ga4Event",
        "type": "EQUALS"
      },
      {
        "paramName": "tagType",
        "paramValue": "googleAdsConversionApiEvent",
        "type": "EQUALS"
      },
      {
        "paramName": "tagType",
        "paramValue": "linkedInAdsCAPIEvent",
        "type": "EQUALS"
      },
      {
        "paramName": "tagType",
        "paramValue": "mntnEvent",
        "type": "EQUALS"
      },
      {
        "paramName": "tagType",
        "paramValue": "pinterestAdsEvent",
        "type": "EQUALS"
      },
      {
        "paramName": "tagType",
        "paramValue": "siriusXMEvent",
        "type": "EQUALS"
      },
      {
        "paramName": "tagType",
        "paramValue": "snapchatEvent",
        "type": "EQUALS"
      },
      {
        "paramName": "tagType",
        "paramValue": "spotifyCAPIEvent",
        "type": "EQUALS"
      },
      {
        "paramName": "tagType",
        "paramValue": "stackAdaptEvent",
        "type": "EQUALS"
      },
      {
        "paramName": "tagType",
        "paramValue": "tikTokAdsEvent",
        "type": "EQUALS"
      }
    ],
    "simpleTableColumns": [
      {
        "defaultValue": "",
        "displayName": "Property Name",
        "name": "name",
        "type": "TEXT"
      },
      {
        "defaultValue": "",
        "displayName": "Property Value",
        "name": "value",
        "type": "TEXT"
      }
    ]
  },
  {
    "type": "SIMPLE_TABLE",
    "name": "commonUserProperties",
    "displayName": "User Properties",
    "enablingConditions": [
      {
        "paramName": "tagType",
        "paramValue": "identify",
        "type": "EQUALS"
      },
      {
        "paramName": "tagType",
        "paramValue": "ga4Event",
        "type": "EQUALS"
      }
    ],
    "simpleTableColumns": [
      {
        "defaultValue": "",
        "displayName": "Property Name",
        "name": "name",
        "type": "TEXT"
      },
      {
        "defaultValue": "",
        "displayName": "Property Value",
        "name": "value",
        "type": "TEXT"
      }
    ]
  },
  {
    "type": "RADIO",
    "name": "commonOptinOptOut",
    "displayName": "Opt-in / Opt-out",
    "simpleValueType": true,
    "enablingConditions": [
      {
        "paramName": "tagType",
        "paramValue": "track",
        "type": "EQUALS"
      },
      {
        "paramName": "tagType",
        "paramValue": "identify",
        "type": "EQUALS"
      }
    ],
    "radioItems": [
      {
        "value": "OPTIN",
        "displayValue": "Opt-in",
        "help": "Deliver only to destination types / instances specified"
      },
      {
        "value": "OPTOUT",
        "displayValue": "Opt-out",
        "help": "Deliver to all but the destination types / instances specified"
      }
    ]
  },
  {
    "type": "PARAM_TABLE",
    "name": "commonOptinOptOutInstances",
    "displayName": "Specific Destination Types / Instance IDs",
    "help": "An Instance ID is required only when there are multiple instances configured for a destination type which supports multiple instance IDs, and you don't want to deliver to all.",
    "enablingConditions": [
      {
        "paramName": "tagType",
        "paramValue": "track",
        "type": "EQUALS"
      }
    ],
    "paramTableColumns": [
      {
        "param": {
          "type": "SELECT",
          "name": "param_table_key_column",
          "displayName": "Destination Type",
          "simpleValueType": true,
          "selectItems": [
            {
              "value": "Google Analytics 4 Proxy",
              "displayValue": "Google Analytics 4 (Proxy)"
            },
            {
              "value": "Google Analytics 4",
              "displayValue": "Google Analytics 4 (Server-Side)"
            },
            {
              "value": "Google AdWords New",
              "displayValue": "Google Ads"
            },
            {
              "value": "Google Ads Conversion API",
              "displayValue": "Google Ads Conversion API"
            },
            {
              "value": "Google Campaign Manager 360 Conversions API",
              "displayValue": "Google Campaign Manager 360 Conversions API"
            },
            {
              "value": "Facebook Conversions API",
              "displayValue": "Facebook Conversions API"
            },
            {
              "value": "Amplitude",
              "displayValue": "Amplitude"
            },
            {
              "value": "Basis",
              "displayValue": "Basis"
            },
            {
              "value": "Bing Ads",
              "displayValue": "Bing Ads"
            },
            {
              "value": "impactdotcom",
              "displayValue": "impact.com"
            },
            {
              "value": "LinkedIn Ads Conversions API",
              "displayValue": "LinkedIn Ads Conversions API"
            },
            {
              "value": "MNTN",
              "displayValue": "MNTN"
            },
            {
              "value": "Mixpanel",
              "displayValue": "Mixpanel"
            },
            {
              "value": "Snapchat",
              "displayValue": "Snapchat"
            },
            {
              "value": "Spotify Conversions API",
              "displayValue": "Spotify Conversions API"
            },
            {
              "value": "StackAdapt",
              "displayValue": "StackAdapt"
            },
            {
              "value": "theTradeDesk",
              "displayValue": "theTradeDesk"
            },
            {
              "value": "TikTok Ads",
              "displayValue": "TikTok Ads"
            },
            {
              "value": "reddit-ads",
              "displayValue": "Reddit Ads"
            },
            {
              "value": "pinterest-ads",
              "displayValue": "Pinterest Ads"
            },
            {
              "value": "SiriusXM",
              "displayValue": "SiriusXM"
            },
            {
              "value": "Twitter Ads",
              "displayValue": "Twitter Ads"
            },
            {
              "value": "viant",
              "displayValue": "Viant"
            },
            {
              "value": "Webhooks",
              "displayValue": "Webhooks"
            },
            {
              "value": "linkedin-ads",
              "displayValue": "LinkedIn Ads - DEPRECATED - instead use LinkedIn Ads Conversions API"
            },
            {
              "value": "Floodlight",
              "displayValue": "Floodlight - DEPRECATED - instead use Google Campaign Manager 360 Conversions API"
            }
          ],
          "macrosInSelect": false
        },
        "isUnique": false
      },
      {
        "param": {
          "type": "TEXT",
          "name": "param_table_value_column",
          "displayName": "Instance ID (optional)",
          "help": "If multiple instances are configured for this destination type, specify one to deliver to (if left blank, this event will be delivered to all configured instances)",
          "simpleValueType": true
        },
        "isUnique": false
      }
    ]
  },
  {
    "type": "PARAM_TABLE",
    "name": "identifyOptinOptOutInstances",
    "displayName": "Specific Destination Types / Instance IDs",
    "help": "An Instance ID is required only when there are multiple instances configured for a destination type which supports multiple instance IDs, and you don't want to deliver to all.",
    "enablingConditions": [
      {
        "paramName": "tagType",
        "paramValue": "identify",
        "type": "EQUALS"
      }
    ],
    "paramTableColumns": [
      {
        "param": {
          "type": "SELECT",
          "name": "param_table_key_column",
          "displayName": "Destination Type",
          "simpleValueType": true,
          "selectItems": [
            {
              "value": "Google Analytics 4 Proxy",
              "displayValue": "Google Analytics 4 (Proxy)"
            },
            {
              "value": "Amplitude",
              "displayValue": "Amplitude"
            },
            {
              "value": "impactdotcom",
              "displayValue": "impact.com"
            },
            {
              "value": "Mixpanel",
              "displayValue": "Mixpanel"
            },
            {
              "value": "Webhooks",
              "displayValue": "Webhooks"
            }
          ],
          "macrosInSelect": false
        },
        "isUnique": false
      },
      {
        "param": {
          "type": "TEXT",
          "name": "param_table_value_column",
          "displayName": "Instance ID (optional)",
          "help": "If multiple instances are configured for this destination type, specify one to deliver to (if left blank, this event will be delivered to all configured instances)",
          "simpleValueType": true
        },
        "isUnique": false
      }
    ]
  }
]


___SANDBOXED_JS_FOR_WEB_TEMPLATE___

// TODOS:
// 1. Bing:
//    a. Implement - Page view (SPA)
//    b. Add support for custom event props (Define your own event parameters)

const callInWindow = require("callInWindow");
const injectScript = require("injectScript");
const log = require("logToConsole");
const makeTableMap = require("makeTableMap");
const makeNumber = require("makeNumber");
const getType = require("getType");
const JSON = require('JSON');

function parseSimpleTable(inputProps) {
  const props = {};
  for (let prop of inputProps) {
    props[prop.name] = prop.value;
  }
  return props;
}

function parseSimpleTableAndParseNumericAndJSONValues(inputProps, destType) {
  const props = {};
  for (let prop of inputProps) {
    let val = prop.value;
    if (val) {
      if (prop.name === "value" || prop.name === "quantity" || prop.name === "item_count" || prop.name === "price" || prop.name === "total" || prop.name === "revenue" || prop.name === "num_items") {
        // prop name is one of the designated numeric prop names, attempt to cast to number, with warning on cast error
        val = makeNumber(val);
        if (val !== val) { // Check for NaN
          val = prop.value;
          log("WARNING: Freshpaint " + destType + " GTM Template could not parse prop '" + prop.name + "' as numeric, leaving as string: " + val);
        }
      } else if (prop.name === "contents" || prop.name === "products" || prop.name === "items") {
        // prop name is one of the designated json object or array names, attempt to parse to JSON, with warning parse error
        val = JSON.parse(val);
        if (!val) {
          val = prop.value;
          log("WARNING: Freshpaint " + destType + " GTM Template could not parse prop '" + prop.name + "' as JSON, leaving as string: " + val);
        }
      }
    }

    props[prop.name] = val;
  }
  return props;
}

function parseParamTable(inputProps, overrides) {
  const keyName = (overrides && overrides.keyColumnName) || "param_table_key_column";
  const valueName = (overrides && overrides.valueColumnName) || "param_table_value_column";

  const props = {};
  for (let prop of inputProps) {
    props[prop[keyName]] = prop[valueName];
  }
  return props;
}

function parseParamTableToArray(inputProps, overrides) {
  const keyName = (overrides && overrides.keyColumnName) || "param_table_key_column";
  const valueName = (overrides && overrides.valueColumnName) || "param_table_value_column";

  const props = [];
  for (let prop of inputProps) {
    props.push(prop);
  }
  return props;
}

function getEventPropsFromGoogEventSettingsVar(inputProps) {
  if (getType(inputProps) !== "object") {
    return {};
  }

  let eventProps = {};

  for (let key in inputProps) {
    if (key === "user_properties") {
      continue;
    }

    eventProps[key] = inputProps[key];
  }

  return eventProps;
}

function getUserPropsFromGoogEventSettingsVar(inputProps) {
  if (getType(inputProps) !== "object") {
    return {};
  }

  let userProps = {};

  for (let key in inputProps) {
    if (key === "user_properties") {
      for (let userKey in inputProps[key]) {
        userProps[userKey] = inputProps[key][userKey];
      }
    }
  }

  return userProps;
}

function objectIsEmpty(inputProps) {
  if (getType(inputProps) !== "object") {
    return true;
  }

  for (let key in inputProps) {
    return false;
  }

  return true;
}

const processEvent = () => {
  let envID = undefined;

  // initialize environment
  // if already done before then this is a no-op
  callFreshpaintProxy("init", {
    envID: envID,
    initPersistantProps: {
      "$gtm": true,
    },
    initConfig: {
    },
  });

  switch (data.tagType) {
    case "init":
      processInit();
      break;
    case "track":
      processTrack();
      break;
    case "identify":
      processIdentify();
      break;
    case "addEventProperties":
      processAddEventProperties();
      break;
    case "ga4Event":
      processGA4Event();
      break;
    case "fbPixelEvent":
      processFBPixelEvent();
      break;
    case "tikTokAdsEvent":
      processTikTokAdsEvent();
      break;
    case "linkedInAdsEvent":
      processLinkedInAdsEvent();
      break;
    case "linkedInAdsCAPIEvent":
      processLinkedInAdsCAPIEvent();
      break;
    case "mntnEvent":
      processMntnEvent();
      break;
    case "twitterAdsEvent":
      processTwitterEvent();
      break;
    case "bingAdsEvent":
      processBingEvent();
      break;
    case "impactEvent":
      processImpactEvent();
      break;
    case "googleAdsEvent":
      processGoogleAdsEvent();
      break;
    case "googleAdsCallConversionsEvent":
      processGoogleAdsCallConversionsEvent();
      break;
    case "googleAdsConversionApiEvent":
      processGoogleAdsConversionApiEvent();
      break;
    case "theTradeDeskEvent":
      processTheTradeDeskEvent();
      break;
    case "snapchatEvent":
      processSnapchatEvent();
      break;
    case "spotifyCAPIEvent":
      processSpotifyCAPIEvent();
      break;
    case "stackAdaptEvent":
      processStackAdaptEvent();
      break;
    case "siriusXMEvent":
      processSiriusXMEvent();
      break;
    case "pinterestAdsEvent":
      processPinterestAdsEvent();
      break;
    case "redditAdsEvent":
      processRedditAdsEvent();
      break;
    case "floodlightEvent":
      processFloodlightEvent();
      break;
    case "basisEvent":
      processBasisEvent();
      break;
    case "googleCM360Event":
      processGoogleCM360Event();
      break;
    case "viantEvent":
      processViantEvent();
      break;
    default:
      log("ERROR: Freshpaint GTM Template unsupported tagType '" + data.tagType + "'");
      data.gtmOnFailure();
      break;
  }
};

const generateOptions = (integration) => {
  const integrations = {
    All: false,
  };
  integrations[integration] = true;

  return {
    integrations: integrations,
  };
};

const generateOptionsFromInstances = (integration, instanceNames, supportMulti) => {
  const integrations = {
    All: false,
  };

  let instanceNamesToUse;
  if (instanceNames) {
    instanceNamesToUse = instanceNames.trim();
  }

  if (instanceNamesToUse) {
    instanceNamesToUse = instanceNamesToUse.split(',');
    if (instanceNamesToUse.length > 1 && !supportMulti) {
      // Indicate to caller this isn't supported
      return undefined;
    }
    for (let i = 0; i < instanceNamesToUse.length; i++) {
      const instanceDelimiter = '::';
      integrations[integration + instanceDelimiter + instanceNamesToUse[i].toString().trim()] = true;
    }

    return {
      integrations: integrations,
    };
  } else {
    return generateOptions(integration);
  }
};

const generateOptionsFromParamTable = (optInOptOut, paramTable) => {
  const props = parseParamTableToArray(paramTable || []);
  if (props === undefined) {
        return props;
  }

  if (props.length === 0) {
    return {};
  }

  const optIn = (optInOptOut === "OPTIN");
  const integrations = {
    All: !optIn,
  };

  for (const prop of props) {
    let specifier = prop["param_table_key_column"];
    if (prop["param_table_value_column"] != "") {
      const instanceDelimiter = '::';
      specifier = specifier + instanceDelimiter + prop["param_table_value_column"] ;
    }

    integrations[specifier] = optIn;
  }

  return {
    integrations: integrations,
  };
};

const processInit = () => {
  // Init handled upstream
  data.gtmOnSuccess();
};

const processTrack = () => {
  if (data.commonEventName) {
    const props = parseSimpleTableAndParseNumericAndJSONValues(data.commonEventPropertiesJSONValue || [], "track");

    const options = generateOptionsFromParamTable(data.commonOptinOptOut, data.commonOptinOptOutInstances);

    track(data.commonEventName, props, options);

      data.gtmOnSuccess();
  } else {
      log("ERROR: Freshpaint Track GTM Template missing eventName");
      data.gtmOnFailure();
  }
};

const processIdentify = () => {
    const options = generateOptionsFromParamTable(data.commonOptinOptOut, data.identifyOptinOptOutInstances);
    if (options === undefined) {
        // log msg occurred in generateOptionsFromParamTable above
        data.gtmOnFailure();
        return;
    }

    let identifier = undefined;
    if (data.identifyIdentifier) {
      identifier = data.identifyIdentifier;
    }

    const props = parseSimpleTable(data.commonUserProperties || []);
    identify(identifier, props, options);

    data.gtmOnSuccess();
};

const processAddEventProperties = () => {
    const props = parseSimpleTable(data.addEventPropertiesSharedProperties || []);

    addEventProperties(props);

    data.gtmOnSuccess();
};

const processGA4Event = () => {
  const ga4ProxySDKKey = "Google Analytics 4 Proxy";
  let options = generateOptions(ga4ProxySDKKey);

  let instanceNamesToUse;
  if (data.ga4InstanceNames) {
    instanceNamesToUse = data.ga4InstanceNames.trim();
  }
  if (instanceNamesToUse) {
    options = generateOptionsFromInstances(ga4ProxySDKKey, instanceNamesToUse, true);
  }

  const userPropsFromVar = getUserPropsFromGoogEventSettingsVar(data.ga4EventPropsVariable);
  const userProps = parseSimpleTable(data.commonUserProperties || []);
  const allUserProps = mergeObj(userPropsFromVar, userProps);
  if (!objectIsEmpty(allUserProps)) {
    identify(undefined, allUserProps, options);
  }

  const eventPropsFromVar = getEventPropsFromGoogEventSettingsVar(data.ga4EventPropsVariable);

  if (data.commonEventName) {
    const props = parseSimpleTable(data.commonEventProperties || []);

    track(data.commonEventName, mergeObj(eventPropsFromVar, props), options);

    data.gtmOnSuccess();
  } else {
    log("ERROR: Freshpaint Google Analytics 4 Proxy GTM Template missing eventName");
    data.gtmOnFailure();
  }
};

const mergeObj = (obj, obj2) => {
  for (let key in obj2) {
    if (obj2.hasOwnProperty(key)) {
      obj[key] = obj2[key];
    }
  }
  return obj;
};

const processFBPixelEvent = () => {
  const facebookCAPISDKKey = "Facebook Conversions API";
  let options = generateOptions(facebookCAPISDKKey);

  const eventName =
    data.fbEventName === "custom" ?
      data.fbCustomEventName : (
        data.fbEventName === "variable" ?
          data.fbVariableEventName : data.fbStandardEventName
      );
  const objectProps =
    data.fbObjectPropertyList && data.fbObjectPropertyList.length ?
      makeTableMap(data.fbObjectPropertyList, "name", "value") : {};
  const objectPropsFromVar =
    getType(data.fbObjectPropertiesFromVariable) === "object" ?
      data.fbObjectPropertiesFromVariable : {};
  const mergedObjectProps = mergeObj(objectPropsFromVar, objectProps);

  // Convert value, num_items to numeric; contents / products to JSON if present
  for (let propKey in mergedObjectProps) {
    let propValue = mergedObjectProps[propKey];
    if (propValue) {
      if (propKey === "value" || propKey === "num_items") {
        let val = makeNumber(propValue);
        if (val !== val) { // Check for NaN
          val = propValue;
          log("WARNING: Freshpaint Facebook Conversions API GTM Template could not parse prop '" + propKey + "' as numeric, leaving as string: " + propValue);
        }
        mergedObjectProps[propKey] = val;
      } else if (propKey === "contents" || propKey === "products" || propKey == "content_ids") {
        let val = JSON.parse(propValue);
        if (!val) {
          log("WARNING: Freshpaint Facebook Conversions API GTM Template could not parse '" + propKey + "' json, leaving as string: " + propValue);
          val = propValue;
        }
        mergedObjectProps[propKey] = val;
      }
    }
  }

  // Process instanceNames
  let instanceNamesToUse;
  if (data.fbInstanceNames) {
    instanceNamesToUse = data.fbInstanceNames.trim();
  }
  if (instanceNamesToUse) {
    options = generateOptionsFromInstances(facebookCAPISDKKey, instanceNamesToUse, true);
  } else if (data.commonDestConfigNames) {
    // Support legacy commonDestConfigNames when fbInstanceNames not specified
    mergedObjectProps.dest_config_names = data.commonDestConfigNames;
  }

  track(eventName, mergedObjectProps, options);

  data.gtmOnSuccess();
};

const processTikTokAdsEvent = () => {
  const tikTokSDKKey = "TikTok Ads";
  let options = generateOptions(tikTokSDKKey);

  const eventName = data.tikTokAdsEventName;

  const objectProps =
    data.commonEventProperties && data.commonEventProperties.length ?
      makeTableMap(data.commonEventProperties, "name", "value") : {};

  // Convert value to numeric; contents / products to JSON if present
  for (let propKey in objectProps) {
    let propValue = objectProps[propKey];
    if (propValue) {
      if (propKey === "value") {
        let val = makeNumber(propValue);
        if (val !== val) { // Check for NaN
          val = propValue;
          log("WARNING: Freshpaint TikTok Ads GTM Template could not parse prop '" + propKey + "' as numeric, leaving as string: " + propValue);
        }
        objectProps[propKey] = val;
      } else if (propKey === "contents" || propKey === "products") {
        let val = JSON.parse(propValue);
        if (!val) {
          log("WARNING: Freshpaint TikTok Ads GTM Template could not parse '" + propKey + "' json, leaving as string: " + propValue);
          val = propValue;
        }
        objectProps[propKey] = val;
      }
    }
  }

    // Process instanceNames
  let instanceNamesToUse;
  if (data.tikTokAdsInstanceNames) {
    instanceNamesToUse = data.tikTokAdsInstanceNames.trim();
  }
  if (instanceNamesToUse) {
    options = generateOptionsFromInstances(tikTokSDKKey, instanceNamesToUse, true);
  }

  track(eventName, objectProps, options);

  data.gtmOnSuccess();
};

const processTwitterEvent = () => {
  const options = generateOptions("Twitter Ads");

  const eventName = data.commonEventName;
  const props = parseParamTable(data.twitterEventParameters || []);

  track(eventName, props, options);

  data.gtmOnSuccess();
};

const processBingEvent = () => {
  const bingAdsSDKKey = "Bing Ads";

  let options = generateOptions(bingAdsSDKKey);
  if (data.bingAdsInstanceName) {
    const instanceNameToUse = data.bingAdsInstanceName.trim();
    options = generateOptionsFromInstances(bingAdsSDKKey, instanceNameToUse, false);
    if (options === undefined) {
      log("ERROR: Multiple Bing Ads Tag IDs not supported: " + instanceNameToUse);
      data.gtmOnFailure();
      return;
    }
  }

  // Check for deprecated page-load tag, nop if so
  if (data.bingEventType === "PAGE_LOAD") {
    data.gtmOnSuccess();
    return;
  }

  // Check for custom page-load tag
  if (data.bingEventType === "CUSTOM_PAGE_LOAD") {
    track("page_view", {}, options);

    data.gtmOnSuccess();
    return;
  }

  // Proceed with non-page-load tag
  let eventName;
  const props = { tpp: "1" };
  const includePropsFromData = (mapping) => {
    for (let propKey in mapping) {
      const dataKey = mapping[propKey];
      if (data[dataKey]) {
        props[propKey] = data[dataKey];
      }
    }
  };

  if (data.bingEventType === "VARIABLE_REVENUE") {
    eventName = "revenue_generated";
    props.action = "";
    props.label = "";
    includePropsFromData({
      currency: "bingCurrency",
      revenue: "bingRevenue",
    });
  } else if (data.bingEventType === "CUSTOM") {
    eventName = data.bingCustomEventAction || "";
    props.action = eventName;
    props.currency = data.bingCurrency || "USD";
    includePropsFromData({
      label: "bingEventLabel",
      category: "bingEventCategory",
      event_value: "bingEventValue",
      revenue: "bingRevenue",
    });
  } else if (data.bingEventType === "ecommerce" || data.bingEventType === "hotel" || data.bingEventType === "travel") {
    let action = data.bingEventAction;
    if (action === "") {
      action = data.bingCustomEventAction;
    }
    eventName = action;
    props.action = action;
    props.label = "";

    if (data.bingEventType === "ecommerce") {
      includePropsFromData({
        product_id: "bingEcommProdId",
        pagetype: "bingEcommPagetype",
        ecomm_totalvalue: "bingEcommTotalValue",
        ecomm_category: "bingEcommCategory",
      });
    } else if (data.bingEventType === "hotel") {
      props.currency = data.bingCurrency || "USD";
      includePropsFromData({
        hct_base_price: "bingHctBasePrice",
        hct_booking_xref: "bingHctBookingXref",
        hct_checkin_date: "bingHctCheckinDate",
        hct_checkout_date: "bingHctCheckoutDate",
        hct_length_of_stay: "bingHctLengthOfStay",
        hct_partner_hotel_id: "bingHctPartnerHotelId",
        hct_total_price: "bingHctTotalPrice",
        hct_pagetype: "bingHctPagetype",
      });
    } else if (data.bingEventType === "travel") {
      includePropsFromData({
        travel_destid: "bingTravelDestid",
        travel_originid: "bingTravelOriginid",
        travel_pagetype: "bingTravelPagetype",
        travel_startdate: "bingTravelStartdate",
        travel_enddate: "bingTravelEnddate",
        travel_totalvalue: "bingTravelTotalvalue",
      });
    }
  } else if (data.bingEventType === "userDefined") {
    eventName = data.bingCustomEventAction || "";
    props.action = eventName;
    props.label = "";
  }

  track(eventName, props, options);

  data.gtmOnSuccess();
};

const impactNumericKeys = {
  "amount": true,
  "discount": true,
  "latitude": true,
  "longitude": true,
  "order_revenue": true,
  "order_shipping": true,
  "order_tax": true,
};

const processImpactEvent = () => {
  const options = generateOptions("impactdotcom");

  // make track call
  const props = parseParamTable(data.impactOtherEventParameters || []);

  if (data.impactEventTypeIdOrCodeSelector === "event_type_code") {
    props.event_type_code = data.impactEventTypeIdOrCode;
  } else {
    props.event_type_id = data.impactEventTypeIdOrCode;
  }

  // Convert any potentially numeric values to numbers
  for (let key in props) {
    if (!impactNumericKeys[key]) {
      continue;
    }

    props[key] = makeNumber(props[key]);
    if (props[key] !== props[key]) { // Check for NaN
      log("WARNING: Freshpaint impact.com GTM Template could not parse prop '" + key + "' as numeric, leaving as string: " + props[key]);
    }
  }

  props.order_id = data.impactOrderId;

  // Convert items, if any, to json object
  let itemsVal = props.items;
  if (itemsVal) {
    itemsVal = JSON.parse(itemsVal);
    if (!itemsVal) {
      log("WARNING: Freshpaint impact.com GTM Template parsing items json, leaving as string: " + props.items);
      itemsVal = props.items;
    }

    props.items = itemsVal;
  }

  track(data.impactEventTypeIdOrCode, props, options);

  data.gtmOnSuccess();
};

const constructECUserDataProps = (ecUserData) => {
  const props = {};
  if (ecUserData && typeof ecUserData === "object") {
    if (ecUserData.email) {
      props.email = ecUserData.email;
    }
    if (ecUserData.phone_number) {
      props.phone_number = ecUserData.phone_number;
    }
    if (ecUserData.address && typeof ecUserData.address === "object" && ecUserData.address[0] && typeof ecUserData.address[0] === "object") {
      props.address = ecUserData.address[0];
    }
  }
  return props;
};

const processGoogleAdsEvent = () => {
  const googleAdsSDKKey = "Google AdWords New";
  let options = generateOptions(googleAdsSDKKey);

  // make track call

  if (data.commonEventName && data.googleAdsConversionLabel) {
    let props = {};

    props.conversion_label = data.googleAdsConversionLabel;

    let instanceNameToUse;
    if (data.googleAdsInstanceName) {
      instanceNameToUse = data.googleAdsInstanceName.trim();
    }
    if (instanceNameToUse) {
      options = generateOptionsFromInstances(googleAdsSDKKey, instanceNameToUse, false);
      if (options === undefined) {
        log("ERROR: Multiple Google Ads Conversion IDs not supported: " + instanceNameToUse);
        data.gtmOnFailure();
        return;
      }
    } else if (data.googleAdsConversionId) {
        // Support legacy googleAdsConversionId when googleAdsInstanceName not specified
        props.conversion_id = data.googleAdsConversionId;
    }

    if (data.googleAdsConversionValue) {
        props.value = data.googleAdsConversionValue;
    }
    if (data.googleAdsOrderId) {
        props.transaction_id = data.googleAdsOrderId;
    }
    if (data.googleAdsCurrencyCode) {
        props.currency = data.googleAdsCurrencyCode;
    }
    if (data.googleAdsEnhancedConversionsCheckbox) {
      options.enhanced_conversions_enabled = true;

      const ecUserData = data.googleAdsEnhancedConversionsUserDataVariable;
      const ecProps = constructECUserDataProps(ecUserData);
      props = mergeObj(props, ecProps);
    }

    track(data.commonEventName, props, options);

    data.gtmOnSuccess();
  } else {
    log("ERROR: Freshpaint Google Ads GTM Template missing eventNme and / or conversionLabel");
    data.gtmOnFailure();
  }
};

const processGoogleAdsCallConversionsEvent = () => {
  let tagIdConversionLabel = "AW-" + data.googleAdsCallConversionsConversionId + "/" + data.googleAdsConversionLabel;

  registerCallConversion(tagIdConversionLabel, data.googleAdsCallConversionsDisplayedPhoneNbr);

  data.gtmOnSuccess();
};

const processGoogleAdsConversionApiEvent = () => {
  const googleAdsConversionApiSDKKey = "Google Ads Conversion API";
  let options = generateOptions(googleAdsConversionApiSDKKey);

  if (data.commonInstanceId) {
    const instanceNameToUse = data.commonInstanceId.trim();
    options = generateOptionsFromInstances(googleAdsConversionApiSDKKey, instanceNameToUse, false);
    if (options === undefined) {
      log("ERROR: Multiple Google Ads Conversion API Customer IDs not supported: " + instanceNameToUse);
      data.gtmOnFailure();
      return;
    }
  }

  const props = parseSimpleTable(data.commonEventProperties || []);

  if (data.googleAdsConversionApiConversionId) {
    props.ctid = data.googleAdsConversionApiConversionId;
  }

  if (data.googleAdsConversionApiConversionName) {
    props.ctname = data.googleAdsConversionApiConversionName;
  }

  track(data.commonEventName, props, options);

  data.gtmOnSuccess();
};

const processLinkedInAdsEvent = () => {
  const options = generateOptions("linkedin-ads");

  const conversionIdsToUse = data.linkedInAdsConversionIds.trim();
  const conversionIds = conversionIdsToUse.split(',');

  if (conversionIds.length === 0) {
    log("ERROR: Freshpaint LinkedIn Ads GTM Template missing Conversion ID(s): " + data.commonEventName);
    data.gtmOnFailure();
    return;
  } else if (conversionIds.length > 3) {
    log("ERROR: Freshpaint LinkedIn Ads GTM Template supports only up to 3 Conversion IDs: " + data.commonEventName);
    data.gtmOnFailure();
    return;
  }

  // make track call(s) for each conversionId
  conversionIds.forEach(id => {
    const props = {};
    props.conversion_id = id.trim();

    track(data.commonEventName, props, options);
  });

  data.gtmOnSuccess();
};

const processLinkedInAdsCAPIEvent = () => {
  const linkedInCAPISDKKey = "LinkedIn Ads Conversions API";
  let options = generateOptions(linkedInCAPISDKKey);

  if (data.linkedInAdsCAPIInstanceName) {
    const instanceNameToUse = data.linkedInAdsCAPIInstanceName.trim();
    options = generateOptionsFromInstances(linkedInCAPISDKKey, instanceNameToUse, false);
    if (options === undefined) {
      log("ERROR: Multiple LinkedIn Ads CAPI instance IDs not supported: " + instanceNameToUse);
      data.gtmOnFailure();
      return;
    }
  }

  const conversionIdsToUse = data.linkedInAdsCAPIConversionIds.trim();
  const conversionIds = conversionIdsToUse.split(',');

  if (conversionIds.length === 0) {
    log("ERROR: Freshpaint LinkedIn Ads Conversions API GTM Template missing Conversion ID(s): " + data.commonEventName);
    data.gtmOnFailure();
    return;
  } else if (conversionIds.length > 3) {
    log("ERROR: Freshpaint LinkedIn Ads Conversions API GTM Template supports only up to 3 Conversion IDs: " + data.commonEventName);
    data.gtmOnFailure();
    return;
  }

  // make track call(s) for each conversionId
  conversionIds.forEach(id => {
    const props = parseSimpleTable(data.commonEventProperties || []);
    props.conversion_id = id.trim();

    track(data.commonEventName, props, options);
  });

  data.gtmOnSuccess();
};

const processMntnEvent = () => {
  const mntnSDKKey = "MNTN";

  let options = generateOptions(mntnSDKKey);
  if (data.mntnInstanceName) {
    const instanceNameToUse = data.mntnInstanceName.trim();
    options = generateOptionsFromInstances(mntnSDKKey, instanceNameToUse, false);
    if (options === undefined) {
      log("ERROR: Multiple MNTN Advertiser IDs not supported: " + instanceNameToUse);
      data.gtmOnFailure();
      return;
    }
  }

  const props = parseSimpleTable(data.commonEventProperties || []);
  track(data.commonEventName, props, options);

  data.gtmOnSuccess();
};

const processTheTradeDeskEvent = () => {
  const theTradeDeskSDKKey = "theTradeDesk";
  let options = generateOptions(theTradeDeskSDKKey);

  // make track call

  if (data.commonEventName && data.theTradeDeskTrackerOrUPixelIDValue) {
    const props = [];

    let instanceNameToUse;
    if (data.theTradeDeskInstanceName) {
      instanceNameToUse = data.theTradeDeskInstanceName.trim();
    }
    if (instanceNameToUse) {
      options = generateOptionsFromInstances(theTradeDeskSDKKey, instanceNameToUse, false);
      if (options === undefined) {
        log("ERROR: Multiple theTradeDesk Advertiser IDs not supported: " + instanceNameToUse);
        data.gtmOnFailure();
        return;
      }
    } else if (data.commonDestConfigNames) {
        // Support legacy commonDestConfigNames when theTradeDeskInstanceName not specified
        props.dest_config_names = data.commonDestConfigNames;
    }

    if (data.theTradeDeskValue) {
       let val = data.theTradeDeskValue;
       val = makeNumber(val);
       if (val !== val) { // Check for NaN
         val = data.theTradeDeskValue;
         log("WARNING: Freshpaint theTradeDesk GTM Template could not parse prop value as numeric, leaving as string: " + val);
       }
       props.value = val;
    }

    props.tracker_id = data.theTradeDeskTrackerOrUPixelIDValue;

    // Convert object values to object if specified

    if (data.theTradeDeskPrivacySettings) {
        let val = JSON.parse(data.theTradeDeskPrivacySettings);
        if (!val) {
          val = data.theTradeDeskPrivacySettings;
          log("WARNING: Freshpaint " + theTradeDeskSDKKey + " GTM Template could not parse prop '" + data.theTradeDeskPrivacySettings + "' as JSON, leaving as string: " + val);
        }

        props.privacy_settings = val;
    }

    if (data.theTradeDeskDataProcessingOption) {
        let val = JSON.parse(data.theTradeDeskDataProcessingOption);
        if (!val) {
          val = data.theTradeDeskDataProcessingOption;
          log("WARNING: Freshpaint " + theTradeDeskSDKKey + " GTM Template could not parse prop '" + data.theTradeDeskDataProcessingOption + "' as JSON, leaving as string: " + val);
        }

        props.data_processing_option = val;
    }

    track(data.commonEventName, props, options);

    data.gtmOnSuccess();
  } else {
    log("ERROR: Freshpaint theTradeDesk GTM Template missing eventName and / or trackerOrUPixelIDValue");
    data.gtmOnFailure();
  }
};

const processSnapchatEvent = () => {
    const snapchatSDKKey = "Snapchat";

    let options = generateOptions(snapchatSDKKey);
    if (data.commonInstanceId) {
      const instanceNameToUse = data.commonInstanceId.trim();
      options = generateOptionsFromInstances(snapchatSDKKey, instanceNameToUse, false);
      if (options === undefined) {
        log("ERROR: Multiple Snapchat Pixel IDs not supported: " + instanceNameToUse);
        data.gtmOnFailure();
        return;
      }
    }

    const props = parseSimpleTable(data.commonEventProperties || []);
    // Grab the snapchatEventName from the dropdown list and include it in props.
    props.snapchat_event_name = data.snapchatEventName;

    track(data.commonEventName, props, options);

    data.gtmOnSuccess();
  };

const processSpotifyCAPIEvent = () => {
    const spotifyCAPISDKKey = "Spotify Conversions API";

    let options = generateOptions(spotifyCAPISDKKey);
    if (data.commonInstanceId) {
      const instanceNameToUse = data.commonInstanceId.trim();
      options = generateOptionsFromInstances(spotifyCAPISDKKey, instanceNameToUse, false);
      if (options === undefined) {
        log("ERROR: Multiple Spotify Connection IDs not supported: " + instanceNameToUse);
        data.gtmOnFailure();
        return;
      }
    }

    const props = parseSimpleTable(data.commonEventProperties || []);
    // Grab the spotifyCAPIEventName from the dropdown list and include it in props.
    props.spotify_event_name = data.spotifyCAPIEventName;

    track(data.commonEventName, props, options);

    data.gtmOnSuccess();
  };

const processStackAdaptEvent = () => {
  const options = generateOptions("StackAdapt");

  if (data.commonEventName && data.stackAdaptConversionEventID) {
    const props = parseSimpleTable(data.commonEventProperties || []);

    props.conversion_id = data.stackAdaptConversionEventID;

    track(data.commonEventName, props, options);

    data.gtmOnSuccess();
  } else {
    log("ERROR: Freshpaint StackAdapt GTM Template missing eventName and / or stackAdaptConversionEventID");
    data.gtmOnFailure();
  }
};

const processSiriusXMEvent = () => {
  const siriusXMSDKKey = "SiriusXM";
  let options = generateOptions(siriusXMSDKKey);

  if (!data.commonEventName) {
    log("ERROR: Freshpaint SiriusXM GTM Template missing eventName");
    data.gtmOnFailure();
    return;
  }

  if (data.commonInstanceId) {
    const appNameToUse = data.commonInstanceId.trim();
    options = generateOptionsFromInstances(siriusXMSDKKey, appNameToUse, false);
    if (options === undefined) {
      log("ERROR: Multiple SiriusXM App Names not supported: " + appNameToUse);
      data.gtmOnFailure();
      return;
    }
  }
  const props = parseSimpleTable(data.commonEventProperties || []);
  track(data.commonEventName, props, options);
  data.gtmOnSuccess();
};

const processPinterestAdsEvent = () => {
  const pinterestSDKKey = "pinterest-ads";
  let options = generateOptions(pinterestSDKKey);

  if (!data.commonEventName) {
    log("ERROR: Freshpaint Pinterest Ads GTM Template missing eventName");
    data.gtmOnFailure();
    return;
  }

  if (data.pinterestAdsInstanceName) {
    const instanceNameToUse = data.pinterestAdsInstanceName.trim();
    options = generateOptionsFromInstances(pinterestSDKKey, instanceNameToUse, false);
    if (options === undefined) {
      log("ERROR: Multiple Pinterest Ads Tag IDs not supported: " + instanceNameToUse);
      data.gtmOnFailure();
      return;
    }
  }

  const props = parseSimpleTable(data.commonEventProperties || []);

  track(data.commonEventName, props, options);

  data.gtmOnSuccess();
};

const processRedditAdsEvent = () => {
  const redditSDKKey = "reddit-ads";
  let options = generateOptions(redditSDKKey);

  if (data.commonEventName) {
    // TODO: Add bool parse support to either backend for string or here to cast to bool, for: test_mode, opt_out props if present
    const props = parseSimpleTableAndParseNumericAndJSONValues(data.commonEventPropertiesJSONValue || []);

    let instanceNameToUse;
    if (data.redditAdsInstanceName) {
      instanceNameToUse = data.redditAdsInstanceName.trim();
    }
    if (instanceNameToUse) {
      options = generateOptionsFromInstances(redditSDKKey, instanceNameToUse, false);
      if (options === undefined) {
        log("ERROR: Multiple Reddit Account IDs not supported: " + instanceNameToUse);
        data.gtmOnFailure();
        return;
      }
    }

    track(data.commonEventName, props, options);

    data.gtmOnSuccess();
  } else {
    log("ERROR: Freshpaint Reddit Ads GTM Template missing eventName");
    data.gtmOnFailure();
  }
};

const processFloodlightEvent = () => {
  if (!data.commonEventName) {
    log("ERROR: Freshpaint Floodlight GTM Template missing Freshpaint Event Name");
    data.gtmOnFailure();
    return;
  }
  if (!data.floodlightGroupTagString) {
    log("ERROR: Freshpaint Floodlight GTM Template missing Group Tag String");
    data.gtmOnFailure();
    return;
  }
  if (!data.floodlightActivityTagString) {
    log("ERROR: Freshpaint Floodlight GTM Template missing Activity Tag String");
    data.gtmOnFailure();
    return;
  }
  if (!data.floodlightCountingMethod) {
    log("ERROR: Freshpaint Floodlight GTM Template missing Counting Method");
    data.gtmOnFailure();
    return;
  }

  const floodlightSDKKey = "Floodlight";
  let options = generateOptions(floodlightSDKKey);

  let instanceNameToUse;
  if (data.floodlightInstanceName) {
    instanceNameToUse = data.floodlightInstanceName.trim();
  }
  if (instanceNameToUse) {
    options = generateOptionsFromInstances(floodlightSDKKey, instanceNameToUse, false);
    if (options === undefined) {
      log("ERROR: Multiple Floodlight Advertiser IDs not supported: " + instanceNameToUse);
      data.gtmOnFailure();
      return;
    }
  }

  let props = parseParamTable(data.floodlightCustomVariables || [], {keyColumnName: "key", valueColumnName: "value"});

  props.group_tag_string = data.floodlightGroupTagString;
  props.activity_tag_string = data.floodlightActivityTagString;
  props.counting_method = data.floodlightCountingMethod.toLowerCase();

  if (data.floodlightEnhancedConversionsCheckbox) {
    options.enhanced_conversions_enabled = true;

    const ecUserData = data.floodlightEnhancedConversionsUserDataVariable;
    const userDataProps = constructECUserDataProps(ecUserData);
    props = mergeObj(props, userDataProps);
  }

  track(data.commonEventName, props, options);
  data.gtmOnSuccess();
};

const processBasisEvent = () => {
  const basisSDKKey = "Basis";

  if (!data.commonEventName) {
    log("ERROR: Freshpaint Basis GTM Template missing Freshpaint Event Name");
    data.gtmOnFailure();
    return;
  }

  let options = generateOptions(basisSDKKey);
  if (data.basisInstanceName) {
    const instanceNameToUse = data.basisInstanceName.trim();
    options = generateOptionsFromInstances(basisSDKKey, instanceNameToUse, false);
    if (options === undefined) {
      log("ERROR: Multiple Basis Advertiser IDs not supported: " + instanceNameToUse);
      data.gtmOnFailure();
      return;
    }
  }

  const props = parseSimpleTable(data.commonEventProperties || []);

  track(data.commonEventName, props, options);
  data.gtmOnSuccess();
};

const processGoogleCM360Event = () => {
  const googleCM360SDKKey = "Google Campaign Manager 360 Conversions API";

  if (!data.commonEventName) {
    log("ERROR: Freshpaint CM360 GTM Template missing Freshpaint Event Name");
    data.gtmOnFailure();
    return;
  }
  if (!data.googleCM360ActivityIDString) {
    log("ERROR: CM360 requires a Floodlight activity ID");
    data.gtmOnFailure();
    return;
  }
  if (!data.googleCM360FloodlightCountingMethod) {
    data.googleCM360FloodlightCountingMethod = "standard";
  }

  let options = generateOptions(googleCM360SDKKey);
  if (data.googleCM360InstanceName) {
    const instanceNameToUse = data.googleCM360InstanceName.trim();
    options = generateOptionsFromInstances(googleCM360SDKKey, instanceNameToUse, false);
    if (options === undefined) {
      log("ERROR: Multiple CM360 Advertiser IDs not supported: " + instanceNameToUse);
      data.gtmOnFailure();
      return;
    }
  }

  const props = parseSimpleTable(data.googleCM360EventProperties || []);
  props.activity_id = data.googleCM360ActivityIDString;
  props.counting_method = data.googleCM360FloodlightCountingMethod.toLowerCase();

  track(data.commonEventName, props, options);
  data.gtmOnSuccess();
};

const processViantEvent = () => {
  const viantSDKKey = "viant";

  if (!data.commonEventName) {
    log("ERROR: Freshpaint Viant GTM Template missing Freshpaint Event Name");
    data.gtmOnFailure();
    return;
  }

  let options = generateOptions(viantSDKKey);
  if (data.viantInstanceName) {
    const instanceNameToUse = data.viantInstanceName.trim();
    options = generateOptionsFromInstances(viantSDKKey, instanceNameToUse, false);
    if (options === undefined) {
      log("ERROR: Multiple Viant Advertiser IDs not supported: " + instanceNameToUse);
      data.gtmOnFailure();
      return;
    }
  }

  track(data.commonEventName, {}, options);
  data.gtmOnSuccess();
};

const callFreshpaintProxy = (cmdName, args) => {
  return callInWindow("_freshpaint_gtm_proxy", cmdName, args);
};

const identify = (userID, props, options) => {
  callFreshpaintProxy("apply", {
    // envID is no longer used, left in for backward compatibility
    envID: undefined,
    methodName: "identify",
    methodArgs: [userID, props, options],
  });
};

// track returns true if valid (truthy) event name, false otherwise
//  optional for caller to check return value - this is mainly to avoid invalid sdk track calls
const track = (eventName, props, options) => {
  if (!eventName) {
    return false;
  }

  callFreshpaintProxy("apply", {
    envID: undefined,
    methodName: "track",
    methodArgs: [eventName, props, options],
  });

  return true;
};

const addEventProperties = (props) => {
  // register is the exposed sdk instance name for addEventProperties
  callFreshpaintProxy("apply", {
    envID: undefined,
    methodName: "register",
    methodArgs: [props],
  });
};

const registerCallConversion = (tagIdConversionLabel, phoneNbr) => {
  callFreshpaintProxy("apply", {
    envID: undefined,
    methodName: "registerCallConversion",
    methodArgs: [tagIdConversionLabel, phoneNbr],
  });
};

const JS_URL = "https://perfalytics.com/static/js/freshpaint-gtm.js";

if (!callFreshpaintProxy("isLoaded")) {
  injectScript(JS_URL, processEvent, data.gtmOnFailure, "freshpaint_gtm_proxy");
} else {
  processEvent();
}


___WEB_PERMISSIONS___

[
  {
    "instance": {
      "key": {
        "publicId": "access_globals",
        "versionId": "1"
      },
      "param": [
        {
          "key": "keys",
          "value": {
            "type": 2,
            "listItem": [
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "key"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  },
                  {
                    "type": 1,
                    "string": "execute"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "_freshpaint_gtm_proxy"
                  },
                  {
                    "type": 8,
                    "boolean": false
                  },
                  {
                    "type": 8,
                    "boolean": false
                  },
                  {
                    "type": 8,
                    "boolean": true
                  }
                ]
              }
            ]
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "inject_script",
        "versionId": "1"
      },
      "param": [
        {
          "key": "urls",
          "value": {
            "type": 2,
            "listItem": [
              {
                "type": 1,
                "string": "https://perfalytics.com/*"
              }
            ]
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "logging",
        "versionId": "1"
      },
      "param": [
        {
          "key": "environments",
          "value": {
            "type": 1,
            "string": "all"
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  }
]


