___TERMS_OF_SERVICE___

By creating or modifying this file you agree to Google Tag Manager's Community
Template Gallery Developer Terms of Service available at
https://developers.google.com/tag-manager/gallery-tos (or such other URL as
Google may provide), as modified from time to time.


___INFO___

{
  "type": "TAG",
  "id": "cvt_temp_public_id",
  "version": 1,
  "securityGroups": [],
  "displayName": "Freshpaint",
  "categories": [
    "ANALYTICS"
  ],
  "brand": {
    "id": "brand_dummy",
    "displayName": "",
    "thumbnail": "data:image/png;base64,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\u003d"
  },
  "description": "Installs Freshpaint onto the page",
  "containerContexts": [
    "WEB"
  ]
}


___TEMPLATE_PARAMETERS___

[
  {
    "type": "TEXT",
    "name": "envID",
    "displayName": "Freshpaint Environment ID",
    "simpleValueType": true,
    "valueValidators": [
      {
        "type": "NON_EMPTY"
      }
    ],
    "enablingConditions": [
      {
        "paramName": "tagType",
        "paramValue": "init",
        "type": "EQUALS"
      }
    ]
  },
  {
    "type": "SELECT",
    "name": "tagType",
    "displayName": "Freshpaint Tag Type",
    "macrosInSelect": false,
    "selectItems": [
      {
        "value": "ga4Event",
        "displayValue": "Google Analytics 4 (Proxy)"
      },
      {
        "value": "googleAdsEvent",
        "displayValue": "Google Ads"
      },
      {
        "value": "googleAdsCallConversionsEvent",
        "displayValue": "Google Ads Call Conversions"
      },
      {
        "value": "fbPixelEvent",
        "displayValue": "Facebook Conversions API"
      },
      {
        "value": "bingAdsEvent",
        "displayValue": "Bing Ads"
      },
      {
        "value": "impactEvent",
        "displayValue": "impact.com"
      },
      {
        "value": "stackAdaptEvent",
        "displayValue": "StackAdapt"
      },
      {
        "value": "theTradeDeskEvent",
        "displayValue": "theTradeDesk"
      },
      {
        "value": "twitterAdsEvent",
        "displayValue": "Twitter Ads"
      },
      {
        "value": "addEventProperties",
        "displayValue": "AddEventProperties"
      },
      {
        "value": "identify",
        "displayValue": "Identify"
      },
      {
        "value": "track",
        "displayValue": "Track"
      },
      {
        "value": "init",
        "displayValue": "Init-DEPRECATED"
      },
    ],
    "notSetText": "-",
    "simpleValueType": true,
    "valueValidators": [
      {
        "type": "NON_EMPTY"
      }
    ]
  },
  {
    "type": "TEXT",
    "name": "commonEventName",
    "displayName": "Freshpaint Event Name",
    "simpleValueType": true,
    "valueValidators": [
      {
        "type": "NON_EMPTY"
      }
    ],
    "enablingConditions": [
      {
        "paramName": "tagType",
        "paramValue": "track",
        "type": "EQUALS"
      },
      {
        "paramName": "tagType",
        "paramValue": "ga4Event",
        "type": "EQUALS"
      },
      {
        "paramName": "tagType",
        "paramValue": "googleAdsEvent",
        "type": "EQUALS"
      },
      {
        "paramName": "tagType",
        "paramValue": "theTradeDeskEvent",
        "type": "EQUALS"
      },
      {
        "paramName": "tagType",
        "paramValue": "stackAdaptEvent",
        "type": "EQUALS"
      }
    ]
  },
  {
    "type": "TEXT",
    "name": "commonDestConfigNames",
    "displayName": "Freshpaint Config Name(s) (optional)",
    "help": "To deliver using a configuration other than the primary Freshpaint configuration, specify one or more configuration names, comma-delimited if two or more",
    "simpleValueType": true,
    "enablingConditions": [
      {
        "paramName": "tagType",
        "paramValue": "fbPixelEvent",
        "type": "EQUALS"
      },
      {
        "paramName": "tagType",
        "paramValue": "theTradeDeskEvent",
        "type": "EQUALS"
      }
    ],
  },
  {
    "type": "TEXT",
    "name": "identifyIdentifier",
    "displayName": "Identifier (recommended)",
    "simpleValueType": true,
    "enablingConditions": [
      {
        "paramName": "tagType",
        "paramValue": "identify",
        "type": "EQUALS"
      }
    ]
  },
  {
    "type": "TEXT",
    "name": "googleAdsCallConversionsDisplayedPhoneNbr",
    "displayName": "Displayed Phone Number to Replace",
    "help": "The phone number you enter needs to have the exact digits it has on your website. For example, if the number on your website has a country code, include the country code here. If the number on your website does not have a country code, do not include the country code here.",
    "simpleValueType": true,
    "valueValidators": [
      {
        "type": "NON_EMPTY"
      }
    ],
    "enablingConditions": [
      {
        "paramName": "tagType",
        "paramValue": "googleAdsCallConversionsEvent",
        "type": "EQUALS"
      }
    ]
  },
  {
    "type": "TEXT",
    "name": "googleAdsConversionLabel",
    "displayName": "Conversion Label",
    "simpleValueType": true,
    "valueValidators": [
      {
        "type": "NON_EMPTY"
      }
    ],
    "enablingConditions": [
      {
        "paramName": "tagType",
        "paramValue": "googleAdsEvent",
        "type": "EQUALS"
      },
      {
        "paramName": "tagType",
        "paramValue": "googleAdsCallConversionsEvent",
        "type": "EQUALS"
      }
    ]
  },
  {
    "type": "TEXT",
    "name": "googleAdsConversionId",
    "displayName": "Conversion ID (optional)",
    "help": "This is needed only if the Conversion ID differs from the one configured in the Freshpaint Destination",
    "simpleValueType": true,
    "enablingConditions": [
      {
        "paramName": "tagType",
        "paramValue": "googleAdsEvent",
        "type": "EQUALS"
      }
    ]
  },
  {
    "type": "TEXT",
    "name": "googleAdsCallConversionsConversionId",
    "displayName": "Conversion ID",
    "simpleValueType": true,
    "enablingConditions": [
      {
        "paramName": "tagType",
        "paramValue": "googleAdsCallConversionsEvent",
        "type": "EQUALS"
      }
    ]
  },
  {
    "type": "TEXT",
    "name": "googleAdsConversionValue",
    "displayName": "Conversion Value (optional)",
    "simpleValueType": true,
    "enablingConditions": [
      {
        "paramName": "tagType",
        "paramValue": "googleAdsEvent",
        "type": "EQUALS"
      }
    ]
  },
  {
    "type": "TEXT",
    "name": "googleAdsOrderId",
    "displayName": "Transaction ID (optional)",
    "simpleValueType": true,
    "enablingConditions": [
      {
        "paramName": "tagType",
        "paramValue": "googleAdsEvent",
        "type": "EQUALS"
      }
    ]
  },
  {
    "type": "TEXT",
    "name": "googleAdsCurrencyCode",
    "displayName": "Currency Code (optional)",
    "simpleValueType": true,
    "enablingConditions": [
      {
        "paramName": "tagType",
        "paramValue": "googleAdsEvent",
        "type": "EQUALS"
      }
    ]
  },
  {
    "type": "RADIO",
    "name": "fbEventName",
    "radioItems": [
      {
        "value": "standard",
        "displayValue": "Standard",
        "subParams": [
          {
            "type": "SELECT",
            "name": "fbStandardEventName",
            "selectItems": [
              {
                "value": "PageView",
                "displayValue": "PageView"
              },
              {
                "value": "AddPaymentInfo",
                "displayValue": "AddPaymentInfo"
              },
              {
                "value": "AddToCart",
                "displayValue": "AddToCart"
              },
              {
                "value": "AddToWishlist",
                "displayValue": "AddToWishlist"
              },
              {
                "value": "CompleteRegistration",
                "displayValue": "CompleteRegistration"
              },
              {
                "value": "Contact",
                "displayValue": "Contact"
              },
              {
                "value": "CustomizeProduct",
                "displayValue": "CustomizeProduct"
              },
              {
                "value": "Donate",
                "displayValue": "Donate"
              },
              {
                "value": "FindLocation",
                "displayValue": "FindLocation"
              },
              {
                "value": "InitiateCheckout",
                "displayValue": "InitiateCheckout"
              },
              {
                "value": "Lead",
                "displayValue": "Lead"
              },
              {
                "value": "Purchase",
                "displayValue": "Purchase"
              },
              {
                "value": "Schedule",
                "displayValue": "Schedule"
              },
              {
                "value": "Search",
                "displayValue": "Search"
              },
              {
                "value": "StartTrial",
                "displayValue": "StartTrial"
              },
              {
                "value": "SubmitApplication",
                "displayValue": "SubmitApplication"
              },
              {
                "value": "Subscribe",
                "displayValue": "Subscribe"
              },
              {
                "value": "ViewContent",
                "displayValue": "ViewContent"
              }
            ],
            "simpleValueType": true,
            "defaultValue": "PageView"
          }
        ]
      },
      {
        "value": "custom",
        "displayValue": "Custom",
        "subParams": [
          {
            "type": "TEXT",
            "name": "fbCustomEventName",
            "displayName": "",
            "simpleValueType": true
          }
        ]
      },
      {
        "value": "variable",
        "displayValue": "Variable",
        "subParams": [
          {
            "type": "SELECT",
            "name": "fbVariableEventName",
            "displayName": "",
            "macrosInSelect": true,
            "selectItems": [],
            "simpleValueType": true
          }
        ]
      }
    ],
    "simpleValueType": true,
    "enablingConditions": [
      {
        "paramName": "tagType",
        "paramValue": "fbPixelEvent",
        "type": "EQUALS"
      }
    ]
  },
  {
    "type": "GROUP",
    "name": "fbGroupParams",
    "displayName": "Object Properties",
    "groupStyle": "ZIPPY_CLOSED",
    "subParams": [
      {
        "type": "SELECT",
        "name": "fbObjectPropertiesFromVariable",
        "displayName": "Load Properties From Variable",
        "macrosInSelect": true,
        "selectItems": [
          {
            "value": false,
            "displayValue": "False"
          }
        ],
        "simpleValueType": true,
        "help": "You can use a variable that returns a JavaScript object with the properties you want to use. This object will be merged with any additional properties you add via the table below. Any conflicts will be resolved in favor of the properties you add to the table."
      },
      {
        "type": "SIMPLE_TABLE",
        "name": "fbObjectPropertyList",
        "simpleTableColumns": [
          {
            "defaultValue": "",
            "displayName": "Property Name",
            "name": "name",
            "type": "TEXT"
          },
          {
            "defaultValue": "",
            "displayName": "Property Value",
            "name": "value",
            "type": "TEXT"
          }
        ],
        "newRowButtonText": "Add property"
      }
    ],
    "enablingConditions": [
      {
        "paramName": "tagType",
        "paramValue": "fbPixelEvent",
        "type": "EQUALS"
      }
    ]
  },
  {
    "type": "RADIO",
    "name": "twitterEventName",
    "displayName": "Select tag event:",
    "radioItems": [
      {
        "value": "PageView",
        "displayValue": "PageView"
      },
      {
        "value": "ViewContent",
        "displayValue": "ViewContent"
      },
      {
        "value": "Search",
        "displayValue": "Search"
      },
      {
        "value": "AddToCart",
        "displayValue": "AddToCart"
      },
      {
        "value": "AddToWishlist",
        "displayValue": "AddToWishlist"
      },
      {
        "value": "InitiateCheckout",
        "displayValue": "InitiateCheckout"
      },
      {
        "value": "AddPaymentInfo",
        "displayValue": "AddPaymentInfo"
      },
      {
        "value": "Purchase",
        "displayValue": "Purchase"
      },
      {
        "value": "Signup",
        "displayValue": "Signup"
      },
      {
        "value": "Download",
        "displayValue": "Download"
      },
      {
        "value": "CompleteRegistration",
        "displayValue": "CompleteRegistration"
      }
    ],
    "simpleValueType": true,
    "enablingConditions": [
      {
        "paramName": "tagType",
        "paramValue": "twitterAdsEvent",
        "type": "EQUALS"
      }
    ]
  },
  {
    "type": "PARAM_TABLE",
    "name": "twitterEventParameters",
    "displayName": "Event Parameters.",
    "paramTableColumns": [
      {
        "param": {
          "type": "SELECT",
          "name": "param_table_key_column",
          "displayName": "Event parameter name",
          "macrosInSelect": false,
          "selectItems": [
            {
              "value": "value",
              "displayValue": "\u0027value\u0027 - amount of an action valuable to your business, such as a purchase. Example: 12.99"
            },
            {
              "value": "currency",
              "displayValue": "\u0027currency\u0027 - use if the \u0027value\u0027 parameter is set. ISO 4217 currency code. Example: USD"
            },
            {
              "value": "content_name",
              "displayValue": "\u0027content_name\u0027 - name of the page or product. Example: Promotional User Sign-up Complete"
            },
            {
              "value": "content_category",
              "displayValue": "\u0027content_category\u0027 - category of the page or product. Example: 30day Trial"
            },
            {
              "value": "content_ids",
              "displayValue": "\u0027content_ids\u0027 - product IDs associated with the Purchase event. Example: [\u0027SKU-AB12\u0027,\u0027SKU-DE45\u0027]."
            },
            {
              "value": "content_type",
              "displayValue": "\u0027content_type\u0027 - use either \u0027product\u0027 or \u0027product_group\u0027 based on the content_ids"
            },
            {
              "value": "num_items",
              "displayValue": "\u0027num_items\u0027 - number of items associated with the conversion event. Example: 3."
            },
            {
              "value": "order_id",
              "displayValue": "\u0027order_id\u0027 - order ID associated with the user\u0027s purchase. Example: OID-8767-1"
            }
          ],
          "simpleValueType": true
        },
        "isUnique": true
      },
      {
        "param": {
          "type": "TEXT",
          "name": "param_table_value_column",
          "displayName": "Value for the event parameter",
          "simpleValueType": true
        },
        "isUnique": false
      }
    ],
    "enablingConditions": [
      {
        "paramName": "tagType",
        "paramValue": "twitterAdsEvent",
        "type": "EQUALS"
      }
    ]
  },
  {
    "type": "SELECT",
    "name": "bingEventType",
    "displayName": "Track Type",
    "macrosInSelect": false,
    "selectItems": [
      {
        "value": "PAGE_LOAD",
        "displayValue": "page view"
      },
      {
        "value": "VARIABLE_REVENUE",
        "displayValue": "Variable revenue for destination URL"
      },
      {
        "value": "CUSTOM",
        "displayValue": "Custom conversion"
      },
      {
        "value": "ecommerce",
        "displayValue": "Vertical: Ecommerce"
      },
      {
        "value": "hotel",
        "displayValue": "Vertical: Hotel"
      },
      {
        "value": "travel",
        "displayValue": "Vertical: Travel"
      },
      {
        "value": "userDefined",
        "displayValue": "Define your own"
      }
    ],
    "simpleValueType": true,
    "enablingConditions": [
      {
        "paramName": "tagType",
        "paramValue": "bingAdsEvent",
        "type": "EQUALS"
      }
    ]
  },
  {
    "type": "SELECT",
    "name": "bingEventAction",
    "displayName": "Event action",
    "macrosInSelect": true,
    "selectItems": [
      {
        "value": "",
        "displayValue": "Custom (input action name manually)"
      },
      {
        "value": "add_payment_info",
        "displayValue": "Add payment info (add_payment_info)"
      },
      {
        "value": "add_to_cart",
        "displayValue": "Add to cart (add_to_cart)"
      },
      {
        "value": "add_to_wishlist",
        "displayValue": "Add to wishlist (add_to_wishlist)"
      },
      {
        "value": "begin_checkout",
        "displayValue": "Begin checkout (begin_checkout)"
      },
      {
        "value": "checkout_progress",
        "displayValue": "Checkout progress (checkout_progress)"
      },
      {
        "value": "exception",
        "displayValue": "Exception (exception)"
      },
      {
        "value": "generate_lead",
        "displayValue": "Generate lead (generate_lead)"
      },
      {
        "value": "login",
        "displayValue": "Log in (login)"
      },
      {
        "value": "purchase",
        "displayValue": "Purchase (purchase)"
      },
      {
        "value": "refund",
        "displayValue": "Refund (refund)"
      },
      {
        "value": "remove_from_cart",
        "displayValue": "Remove from cart (remove_from_cart)"
      },
      {
        "value": "screen_view",
        "displayValue": "Screen view (screen_view)"
      },
      {
        "value": "search",
        "displayValue": "Search (search)"
      },
      {
        "value": "select_content",
        "displayValue": "Select content (select_content)"
      },
      {
        "value": "set_checkout_option",
        "displayValue": "Set checkout option (set_checkout_option)"
      },
      {
        "value": "share",
        "displayValue": "Share (share)"
      },
      {
        "value": "sign_up",
        "displayValue": "Sign up (sign_up)"
      },
      {
        "value": "view_item",
        "displayValue": "View item (view_item)"
      },
      {
        "value": "view_item_list",
        "displayValue": "View item list (view_item_list)"
      },
      {
        "value": "view_promotion",
        "displayValue": "View promotion (view_promotion)"
      },
      {
        "value": "view_search_results",
        "displayValue": "View search results (view_search_results)"
      }
    ],
    "simpleValueType": true,
    "help": "If you select \"Custom\" and then leave the \"Define your own event action\" field blank, an empty event action value will be sent",
    "enablingConditions": [
      {
        "paramName": "bingEventType",
        "paramValue": "ecommerce",
        "type": "EQUALS"
      },
      {
        "paramName": "bingEventType",
        "paramValue": "hotel",
        "type": "EQUALS"
      },
      {
        "paramName": "bingEventType",
        "paramValue": "travel",
        "type": "EQUALS"
      }
    ]
  },
  {
    "type": "TEXT",
    "name": "bingCustomEventAction",
    "displayName": "Define your own event action",
    "simpleValueType": true,
    "enablingConditions": [
      {
        "paramName": "bingEventType",
        "paramValue": "CUSTOM",
        "type": "EQUALS"
      },
      {
        "paramName": "bingEventAction",
        "paramValue": "",
        "type": "EQUALS"
      },
      {
        "paramName": "bingEventType",
        "paramValue": "userDefined",
        "type": "EQUALS"
      }
    ]
  },
  {
    "type": "TEXT",
    "name": "bingEventCategory",
    "displayName": "Event category",
    "simpleValueType": true,
    "enablingConditions": [
      {
        "paramName": "bingEventType",
        "paramValue": "CUSTOM",
        "type": "EQUALS"
      }
    ]
  },
  {
    "type": "TEXT",
    "name": "bingEventLabel",
    "displayName": "Event label",
    "simpleValueType": true,
    "enablingConditions": [
      {
        "paramName": "bingEventType",
        "paramValue": "CUSTOM",
        "type": "EQUALS"
      }
    ]
  },
  {
    "type": "TEXT",
    "name": "bingEventValue",
    "displayName": "Event value",
    "simpleValueType": true,
    "enablingConditions": [
      {
        "paramName": "bingEventType",
        "paramValue": "CUSTOM",
        "type": "EQUALS"
      }
    ]
  },
  {
    "type": "TEXT",
    "name": "bingCurrency",
    "displayName": "Currency",
    "simpleValueType": true,
    "help": "Currency value must be ISO standard currency code",
    "enablingConditions": [
      {
        "paramName": "bingEventType",
        "paramValue": "VARIABLE_REVENUE",
        "type": "EQUALS"
      },
      {
        "paramName": "bingEventType",
        "paramValue": "CUSTOM",
        "type": "EQUALS"
      },
      {
        "paramName": "bingEventType",
        "paramValue": "hotel",
        "type": "EQUALS"
      }
    ],
    "defaultValue": "USD"
  },
  {
    "type": "TEXT",
    "name": "bingRevenue",
    "displayName": "Revenue Value",
    "simpleValueType": true,
    "enablingConditions": [
      {
        "paramName": "bingEventType",
        "paramValue": "VARIABLE_REVENUE",
        "type": "EQUALS"
      },
      {
        "paramName": "bingEventType",
        "paramValue": "CUSTOM",
        "type": "EQUALS"
      }
    ]
  },
  {
    "type": "GROUP",
    "name": "bingEcomParams",
    "displayName": "Ecommerce event parameters",
    "groupStyle": "NO_ZIPPY",
    "subParams": [
      {
        "type": "TEXT",
        "name": "bingEcommProdId",
        "displayName": "Retail product ID",
        "simpleValueType": true
      },
      {
        "type": "SELECT",
        "name": "bingEcommPagetype",
        "displayName": "Retail page type",
        "macrosInSelect": true,
        "selectItems": [
          {
            "value": "home",
            "displayValue": "Home"
          },
          {
            "value": "searchresults",
            "displayValue": "Search Results"
          },
          {
            "value": "category",
            "displayValue": "Category"
          },
          {
            "value": "product",
            "displayValue": "Product"
          },
          {
            "value": "cart",
            "displayValue": "Cart"
          },
          {
            "value": "purchase",
            "displayValue": "Purchase"
          },
          {
            "value": "other",
            "displayValue": "Other"
          }
        ],
        "simpleValueType": true,
        "help": "The pagetype parameter is required when you include the prodid parameter."
      },
      {
        "type": "TEXT",
        "name": "bingEcommTotalValue",
        "displayName": "Retail total value",
        "simpleValueType": true
      },
      {
        "type": "TEXT",
        "name": "bingEcommCategory",
        "displayName": "Retail category",
        "simpleValueType": true
      }
    ],
    "enablingConditions": [
      {
        "paramName": "bingEventType",
        "paramValue": "ecommerce",
        "type": "EQUALS"
      }
    ]
  },
  {
    "type": "GROUP",
    "name": "bingHotelParams",
    "displayName": "Hotel event parameters",
    "groupStyle": "NO_ZIPPY",
    "subParams": [
      {
        "type": "TEXT",
        "name": "bingHctBasePrice",
        "displayName": "Hotel base price",
        "simpleValueType": true
      },
      {
        "type": "TEXT",
        "name": "bingHctBookingXref",
        "displayName": "Hotel booking reference #",
        "simpleValueType": true
      },
      {
        "type": "TEXT",
        "name": "bingHctCheckinDate",
        "displayName": "Hotel check-in date",
        "simpleValueType": true,
        "help": "Value must be in YYYY-MM-DD date format"
      },
      {
        "type": "TEXT",
        "name": "bingHctCheckoutDate",
        "displayName": "Hotel check-out date",
        "simpleValueType": true,
        "help": "Value must be in YYYY-MM-DD date format"
      },
      {
        "type": "TEXT",
        "name": "bingHctLengthOfStay",
        "displayName": "Hotel length of stay",
        "simpleValueType": true
      },
      {
        "type": "TEXT",
        "name": "bingHctPartnerHotelId",
        "displayName": "Partner hotel ID",
        "simpleValueType": true
      },
      {
        "type": "TEXT",
        "name": "bingHctTotalPrice",
        "displayName": "Hotel total price",
        "simpleValueType": true
      },
      {
        "type": "SELECT",
        "name": "bingHctPagetype",
        "displayName": "Hotel page type",
        "macrosInSelect": true,
        "selectItems": [
          {
            "value": "home",
            "displayValue": "Home"
          },
          {
            "value": "searchresults",
            "displayValue": "Search Results"
          },
          {
            "value": "offerdetail",
            "displayValue": "Offer Detail"
          },
          {
            "value": "conversionintent",
            "displayValue": "Conversion Intent"
          },
          {
            "value": "conversion",
            "displayValue": "Conversion"
          },
          {
            "value": "property",
            "displayValue": "Property"
          },
          {
            "value": "cart",
            "displayValue": "Cart"
          },
          {
            "value": "purchase",
            "displayValue": "Purchase"
          },
          {
            "value": "cancel",
            "displayValue": "Cancel"
          },
          {
            "value": "other",
            "displayValue": "Other"
          }
        ],
        "simpleValueType": true
      },
      {
        "type": "LABEL",
        "name": "bingHotelLabel",
        "displayName": "The hotel total price (hct_total_price) and currency parameters are required when you include other hotel parameters."
      }
    ],
    "enablingConditions": [
      {
        "paramName": "bingEventType",
        "paramValue": "hotel",
        "type": "EQUALS"
      }
    ]
  },
  {
    "type": "GROUP",
    "name": "bingTravelParams",
    "displayName": "Travel event parameters",
    "groupStyle": "NO_ZIPPY",
    "subParams": [
      {
        "type": "TEXT",
        "name": "bingTravelDestid",
        "displayName": "Travel destination ID",
        "simpleValueType": true
      },
      {
        "type": "TEXT",
        "name": "bingTravelOriginid",
        "displayName": "Travel origin ID",
        "simpleValueType": true
      },
      {
        "type": "SELECT",
        "name": "bingTravelPagetype",
        "displayName": "Travel page type",
        "macrosInSelect": true,
        "selectItems": [
          {
            "value": "home",
            "displayValue": "Home"
          },
          {
            "value": "searchresults",
            "displayValue": "Search Results"
          },
          {
            "value": "offerdetail",
            "displayValue": "Offer Detail"
          },
          {
            "value": "conversionintent",
            "displayValue": "Conversion Intent"
          },
          {
            "value": "conversion",
            "displayValue": "Conversion"
          },
          {
            "value": "cancel",
            "displayValue": "Cancel"
          },
          {
            "value": "other",
            "displayValue": "Other"
          }
        ],
        "simpleValueType": true
      },
      {
        "type": "TEXT",
        "name": "bingTravelStartdate",
        "displayName": "Travel start date",
        "simpleValueType": true,
        "help": "Value must be in YYYY-MM-DD date format"
      },
      {
        "type": "TEXT",
        "name": "bingTravelEnddate",
        "displayName": "Travel end date",
        "simpleValueType": true,
        "help": "Value must be in YYYY-MM-DD date format"
      },
      {
        "type": "TEXT",
        "name": "bingTravelTotalvalue",
        "displayName": "Travel total value",
        "simpleValueType": true
      }
    ],
    "enablingConditions": [
      {
        "paramName": "bingEventType",
        "paramValue": "travel",
        "type": "EQUALS"
      }
    ]
  },
  {
    "type": "TEXT",
    "name": "bingPagePath",
    "displayName": "Page path",
    "simpleValueType": true,
    "help": "Must start with a \u0027/\u0027, ex: \u0027/spa_page\u0027",
    "enablingConditions": [
      {
        "paramName": "bingEventType",
        "paramValue": "pageViewSPA",
        "type": "EQUALS"
      }
    ]
  },
  {
    "type": "TEXT",
    "name": "bingPageTitle",
    "displayName": "Page title",
    "simpleValueType": true,
    "help": "Can leave empty to re-use document title",
    "enablingConditions": [
      {
        "paramName": "bingEventType",
        "paramValue": "pageViewSPA",
        "type": "EQUALS"
      }
    ]
  },
  {
    "type": "GROUP",
    "name": "bingCustomParamTableGroup",
    "displayName": "Define your own event parameters",
    "groupStyle": "NO_ZIPPY",
    "subParams": [
      {
        "type": "LABEL",
        "name": "bingCustomPropsLabel",
        "displayName": "Explicit parameters given a value above may be overridden by parameters given in this table. You can use either way to pass parameters."
      },
      {
        "type": "SIMPLE_TABLE",
        "name": "bingCustomParamTable",
        "displayName": "Event Properties",
        "simpleTableColumns": [
          {
            "defaultValue": "",
            "displayName": "Name",
            "name": "customParamName",
            "type": "TEXT"
          },
          {
            "defaultValue": "",
            "displayName": "Value",
            "name": "customParamValue",
            "type": "TEXT"
          }
        ]
      }
    ],
    "enablingConditions": [
      {
        "paramName": "tagType",
        "paramValue": "bingAdsEvent",
        "type": "EQUALS"
      }
    ]
  },
  {
    "type": "RADIO",
    "name": "impactEventTypeIdOrCodeSelector",
    "displayName": "Use event_type_id vs. event_type_code",
    "help": "One or the other of event_type_id or event_type_code must be specified.",
    "radioItems": [
      {
        "value": "event_type_id",
        "displayValue": "event_type_id"
      },
      {
        "value": "event_type_code",
        "displayValue": "event_type_code"
      }
    ],
    "enablingConditions": [
      {
        "paramName": "tagType",
        "paramValue": "impactEvent",
        "type": "EQUALS"
      }
    ],
  },
  {
    "type": "TEXT",
    "name": "impactEventTypeIdOrCode",
    "displayName": "event_type_id / event_type_code (required)",
    "simpleValueType": true,
    "enablingConditions": [
      {
        "paramName": "tagType",
        "paramValue": "impactEvent",
        "type": "EQUALS"
      }
    ],
    "valueValidators": [
      {
        "type": "NON_EMPTY"
      }
    ]
  },
  {
    "type": "TEXT",
    "name": "impactOrderId",
    "displayName": "order_id (required)",
    "simpleValueType": true,
    "enablingConditions": [
      {
        "paramName": "tagType",
        "paramValue": "impactEvent",
        "type": "EQUALS"
      }
    ],
    "valueValidators": [
      {
        "type": "NON_EMPTY"
      }
    ]
  },
  {
    "type": "PARAM_TABLE",
    "name": "impactOtherEventParameters",
    "displayName": "Other parameters (optional)",
    "paramTableColumns": [
      {
        "param": {
          "type": "SELECT",
          "name": "param_table_key_column",
          "displayName": "property",
          "macrosInSelect": false,
          "selectItems": [
            {
              "value": "currency",
              "displayValue": "currency"
            },
            {
              "value": "customer_status",
              "displayValue": "customer_status"
            },
            {
              "value": "discount",
              "displayValue": "discount"
            },
            {
              "value": "email",
              "displayValue": "email"
            },
            {
              "value": "items",
              "displayValue": "items"
            },
            {
              "value": "latitude",
              "displayValue": "latitude"
            },
            {
              "value": "longitude",
              "displayValue": "longitude"
            },
            {
              "value": "order_promo_code",
              "displayValue": "order_promo_code"
            },
            {
              "value": "order_revenue",
              "displayValue": "order_revenue"
            },
            {
              "value": "order_shipping",
              "displayValue": "order_shipping"
            },
            {
              "value": "order_tax",
              "displayValue": "order_tax"
            }
          ],
          "simpleValueType": true
        },
        "isUnique": true
      },
      {
        "param": {
          "type": "TEXT",
          "name": "param_table_value_column",
          "displayName": "Value",
          "simpleValueType": true
        },
        "isUnique": false
      }
    ],
    "enablingConditions": [
      {
        "paramName": "tagType",
        "paramValue": "impactEvent",
        "type": "EQUALS"
      }
    ]
  },
  {
    "type": "RADIO",
    "name": "theTradeDeskTrackerOrUPixel",
    "displayName": "Use Event Tracker ID vs. Universal Pixel ID",
    "help": "Universal Pixel ID not currently supported",
    "radioItems": [
      {
        "value": "tracker_id",
        "displayValue": "Event Tracker ID"
      }
    ],
    "enablingConditions": [
      {
        "paramName": "tagType",
        "paramValue": "theTradeDeskEvent",
        "type": "EQUALS"
      }
    ],
  },
  {
    "type": "TEXT",
    "name": "theTradeDeskTrackerOrUPixelIDValue",
    "displayName": "Event Tracker ID / Universal Pixel ID Value",
    "help": "Universal Pixel ID not currently supported",
    "simpleValueType": true,
    "enablingConditions": [
      {
        "paramName": "tagType",
        "paramValue": "theTradeDeskEvent",
        "type": "EQUALS"
      }
    ],
    "valueValidators": [
      {
        "type": "NON_EMPTY"
      }
    ]
  },
  {
    "type": "SELECT",
    "name": "theTradeDeskEventName",
    "displayName": "Event Name (optional)",
    "selectItems": [
      {
        "value": "addtocart",
        "displayValue": "addtocart"
      },
      {
        "value": "purchase",
        "displayValue": "purchase"
      },
      {
        "value": "viewitem",
        "displayValue": "viewitem"
      },
      {
        "value": "searchitem",
        "displayValue": "searchitem"
      },
      {
        "value": "searchcategory",
        "displayValue": "searchcategory"
      },
      {
        "value": "login",
        "displayValue": "login"
      },
      {
        "value": "messagebusiness",
        "displayValue": "messagebusiness"
      },
      {
        "value": "direction",
        "displayValue": "direction"
      },
      {
        "value": "startcheckout",
        "displayValue": "startcheckout"
      },
      {
        "value": "viewcart",
        "displayValue": "viewcart"
      },
      {
        "value": "sitevisit",
        "displayValue": "sitevisit"
      },
      {
        "value": "wishlistitem",
        "displayValue": "wishlistitem"
      }
    ],
    "notSetText": "-",
    "enablingConditions": [
      {
        "paramName": "tagType",
        "paramValue": "theTradeDeskEvent",
        "type": "EQUALS"
      }
    ]
  },
  {
    "type": "TEXT",
    "name": "theTradeDeskValue",
    "displayName": "value (required only for purchase events)",
    "simpleValueType": true,
    "enablingConditions": [
      {
        "paramName": "tagType",
        "paramValue": "theTradeDeskEvent",
        "type": "EQUALS"
      }
    ]
  },
  {
    "type": "TEXT",
    "name": "theTradeDeskCurrency",
    "displayName": "currency (optional)",
    "simpleValueType": true,
    "enablingConditions": [
      {
        "paramName": "tagType",
        "paramValue": "theTradeDeskEvent",
        "type": "EQUALS"
      }
    ]
  },
  {
    "type": "TEXT",
    "name": "theTradeDeskOrderId",
    "displayName": "order_id (optional)",
    "simpleValueType": true,
    "enablingConditions": [
      {
        "paramName": "tagType",
        "paramValue": "theTradeDeskEvent",
        "type": "EQUALS"
      }
    ]
  },
  {
    "type": "TEXT",
    "name": "theTradeDeskItems",
    "displayName": "items (optional object array)",
    "simpleValueType": true,
    "enablingConditions": [
      {
        "paramName": "tagType",
        "paramValue": "theTradeDeskEvent",
        "type": "EQUALS"
      }
    ]
  },
  {
    "type": "PARAM_TABLE",
    "name": "theTradeDeskTDEventParameters",
    "displayName": "td1 - td10 properties (optional)",
    "paramTableColumns": [
      {
        "param": {
          "type": "SELECT",
          "name": "param_table_key_column",
          "displayName": "property",
          "macrosInSelect": false,
          "selectItems": [
            {
              "value": "td1",
              "displayValue": "td1"
            },
            {
              "value": "td2",
              "displayValue": "td2"
            },
            {
              "value": "td3",
              "displayValue": "td3"
            },
            {
              "value": "td4",
              "displayValue": "td4"
            },
            {
              "value": "td5",
              "displayValue": "td5"
            },
            {
              "value": "td6",
              "displayValue": "td6"
            },
            {
              "value": "td7",
              "displayValue": "td7"
            },
            {
              "value": "td8",
              "displayValue": "td8"
            },
            {
              "value": "td9",
              "displayValue": "td9"
            },
            {
              "value": "td10",
              "displayValue": "td10"
            }
          ],
          "simpleValueType": true
        },
        "isUnique": true
      },
      {
        "param": {
          "type": "TEXT",
          "name": "param_table_value_column",
          "displayName": "Value",
          "simpleValueType": true
        },
        "isUnique": false
      }
    ],
    "enablingConditions": [
      {
        "paramName": "tagType",
        "paramValue": "theTradeDeskEvent",
        "type": "EQUALS"
      }
    ]
  },
  {
    "type": "TEXT",
    "name": "stackAdaptConversionEventID",
    "displayName": "StackAdapt Conversion Event Unique ID",
    "simpleValueType": true,
    "enablingConditions": [
      {
        "paramName": "tagType",
        "paramValue": "stackAdaptEvent",
        "type": "EQUALS"
      }
    ],
    "valueValidators": [
      {
        "type": "NON_EMPTY"
      }
    ]
  },
  {
    "type": "SIMPLE_TABLE",
    "name": "addEventPropertiesSharedProperties",
    "displayName": "Shared Event Properties",
    "help": "Any properties that should be included with all events going forward.",
    "simpleTableColumns": [
      {
        "defaultValue": "",
        "displayName": "Property Name",
        "name": "name",
        "type": "TEXT"
      },
      {
        "defaultValue": "",
        "displayName": "Property Value",
        "name": "value",
        "type": "TEXT"
      }
    ],
    "enablingConditions": [
      {
        "paramName": "tagType",
        "paramValue": "addEventProperties",
        "type": "EQUALS"
      }
    ],
    "valueValidators": [
      {
        "type": "TABLE_ROW_COUNT",
        "args": [
          1
        ]
      }
    ]
  },
  {
    "type": "SIMPLE_TABLE",
    "name": "commonEventProperties",
    "displayName": "Event Properties",
    "simpleTableColumns": [
      {
        "defaultValue": "",
        "displayName": "Property Name",
        "name": "name",
        "type": "TEXT"
      },
      {
        "defaultValue": "",
        "displayName": "Property Value",
        "name": "value",
        "type": "TEXT"
      }
    ],
    "enablingConditions": [
      {
        "paramName": "tagType",
        "paramValue": "track",
        "type": "EQUALS"
      },
      {
        "paramName": "tagType",
        "paramValue": "ga4Event",
        "type": "EQUALS"
      },
      {
        "paramName": "tagType",
        "paramValue": "stackAdaptEvent",
        "type": "EQUALS"
      }
    ]
  },
  {
    "type": "SIMPLE_TABLE",
    "name": "commonUserProperties",
    "displayName": "User Properties",
    "simpleTableColumns": [
      {
        "defaultValue": "",
        "displayName": "Property Name",
        "name": "name",
        "type": "TEXT"
      },
      {
        "defaultValue": "",
        "displayName": "Property Value",
        "name": "value",
        "type": "TEXT"
      }
    ],
    "enablingConditions": [
      {
        "paramName": "tagType",
        "paramValue": "identify",
        "type": "EQUALS"
      },
      {
        "paramName": "tagType",
        "paramValue": "ga4Event",
        "type": "EQUALS"
      }
    ]
  }
]


___SANDBOXED_JS_FOR_WEB_TEMPLATE___

// TODOS:
// 1. Bing:
//    a. Implement - Page view (SPA)
//    b. Add support for custom event props (Define your own event parameters)

const callInWindow = require("callInWindow");
const injectScript = require("injectScript");
const log = require("logToConsole");
const makeTableMap = require("makeTableMap");
const getType = require("getType");
const JSON = require('JSON');

function parseSimpleTable(inputProps) {
  const props = {};
  for (let prop of inputProps) {
    props[prop.name] = prop.value;
  }
  return props;
}

function parseParamTable(inputProps) {
  const props = {};
  for (let prop of inputProps) {
    props[prop.param_table_key_column] = prop.param_table_value_column;
  }
  return props;
}

const processEvent = () => {
  let envID = undefined;
  if (data.tagType === "init") {
    if (!data.envID) {
      log("[freshpaint-GTM] environment ID is required for init tag");
      data.gtmOnFailure();
      return;
    }

    envID = data.envID;
  }

  // initialize environment
  // if already done before then this is a no-op
  callFreshpaintProxy("init", {
    envID: envID,
    initPersistantProps: {
      "$gtm": true,
    },
    initConfig: {
    },
  });

  // actually process the event
  if (data.tagType === "init") {
    processInit();
  } else if (data.tagType === "track") {
    processTrack();
  } else if (data.tagType === "identify") {
    processIdentify();
  } else if (data.tagType === "addEventProperties") {
    processAddEventProperties();
  } else if (data.tagType === "ga4Event") {
    processGA4Event();
  } else if (data.tagType === "fbPixelEvent") {
    processFBPixelEvent();
  } else if (data.tagType === "twitterAdsEvent") {
    processTwitterEvent();
  } else if (data.tagType === "bingAdsEvent") {
    processBingEvent();
  } else if (data.tagType === "impactEvent") {
    processImpactEvent();
  } else if (data.tagType === "googleAdsEvent") {
    processGoogleAdsEvent();
  } else if (data.tagType === "googleAdsCallConversionsEvent") {
    processGoogleAdsCallConversionsEvent();
  } else if (data.tagType === "theTradeDeskEvent") {
    processTheTradeDeskEvent();
  } else if (data.tagType === "stackAdaptEvent") {
    processStackAdaptEvent();
  } else {
    log("ERROR: Freshpaint GTM Template unsupported tagType '" + data.tagType + "'");
    data.gtmOnFailure();
  }
};

const generateOptions = (integration) => {
  const integrations = {
    All: false,
  };
  integrations[integration] = true;

  return {
    integrations: integrations,
  };
};

const processInit = () => {
  // Init handled upstream
  data.gtmOnSuccess();
};

const processTrack = () => {
  const options = {};

  if (data.commonEventName) {
    const props = parseSimpleTable(data.commonEventProperties || []);
    track(data.commonEventName, props, options);

    data.gtmOnSuccess();
  } else {
      log("ERROR: Freshpaint Track GTM Template missing eventName");
      data.gtmOnFailure();
  }
};

const processIdentify = () => {
    // Send identify to all enabled destinations
    const options = {};

    let identifier = undefined;
    if (data.identifyIdentifier) {
      identifier = data.identifyIdentifier;
    }

    const props = parseSimpleTable(data.commonUserProperties || []);
    identify(identifier, props, options);

    data.gtmOnSuccess();
};

const processAddEventProperties = () => {
    const props = parseSimpleTable(data.addEventPropertiesSharedProperties || []);

    addEventProperties(props);

    data.gtmOnSuccess();
};

const processGA4Event = () => {
  const options = generateOptions("Google Analytics 4 Proxy");

  if (data.commonUserProperties) {
    const props = parseSimpleTable(data.commonUserProperties || []);
    identify(undefined, props, options);
  }

  if (data.commonEventName) {
    const props = parseSimpleTable(data.commonEventProperties || []);
    track(data.commonEventName, props, options);

    data.gtmOnSuccess();
  } else {
      log("ERROR: Freshpaint Google Analytics 4 Proxy GTM Template missing eventName");
      data.gtmOnFailure();
  }
};

const mergeObj = (obj, obj2) => {
  for (let key in obj2) {
    if (obj2.hasOwnProperty(key)) {
      obj[key] = obj2[key];
    }
  }
  return obj;
};

const processFBPixelEvent = () => {
  const options = generateOptions("Facebook Conversions API");

  const eventName =
    data.fbEventName === "custom" ?
      data.fbCustomEventName : (
        data.fbEventName === "variable" ?
          data.fbVariableEventName : data.fbStandardEventName
      );
  const objectProps =
    data.fbObjectPropertyList && data.fbObjectPropertyList.length ? 
      makeTableMap(data.fbObjectPropertyList, "name", "value") : {};
  const objectPropsFromVar =
    getType(data.fbObjectPropertiesFromVariable) === "object" ? 
      data.fbObjectPropertiesFromVariable : {};
  const mergedObjectProps = mergeObj(objectPropsFromVar, objectProps);
  
  if (data.commonDestConfigNames) {
    mergedObjectProps.dest_config_names = data.commonDestConfigNames;
  }

  track(eventName, mergedObjectProps, options);

  data.gtmOnSuccess();
};

const processTwitterEvent = () => {
  const options = generateOptions("Twitter Ads");

  const eventName = data.twitterEventName;
  const props = parseParamTable(data.twitterEventParameters || []);

  track(eventName, props, options);

  data.gtmOnSuccess();
};

const processBingEvent = () => {
  const options = generateOptions("Bing Ads");
  
  if (data.bingEventType === "PAGE_LOAD") {
    page({}, options);

    data.gtmOnSuccess();
    return;
  } 
  
  // make required track call
  let eventName;
  const props = { tpp: "1" }; 
  const includePropsFromData = (mapping) => {
    for (let propKey in mapping) {
      const dataKey = mapping[propKey];
      if (data[dataKey]) {
        props[propKey] = data[dataKey];
      }
    }
  };
  
  if (data.bingEventType === "VARIABLE_REVENUE") {
    eventName = "revenue_generated";
    props.action = "";
    props.label = "";
    includePropsFromData({
      currency: "bingCurrency",
      revenue: "bingRevenue",
    });
  } else if (data.bingEventType === "CUSTOM") {
    eventName = data.bingCustomEventAction || "";
    props.action = eventName;
    props.currency = data.bingCurrency || "USD";
    includePropsFromData({
      label: "bingEventLabel",
      category: "bingEventCategory",
      event_value: "bingEventValue",
      revenue: "bingRevenue",
    });
  } else if (data.bingEventType === "ecommerce" || data.bingEventType === "hotel" || data.bingEventType === "travel") {
    let action = data.bingEventAction;
    if (action === "") {
      action = data.bingCustomEventAction;
    }
    eventName = action;
    props.action = action;
    props.label = "";
    
    if (data.bingEventType === "ecommerce") {
      includePropsFromData({
        product_id: "bingEcommProdId",
        pagetype: "bingEcommPagetype",
        ecomm_totalvalue: "bingEcommTotalValue",
        ecomm_category: "bingEcommCategory",
      });
    } else if (data.bingEventType === "hotel") {
      props.currency = data.bingCurrency || "USD";
      includePropsFromData({
        hct_base_price: "bingHctBasePrice",
        hct_booking_xref: "bingHctBookingXref",
        hct_checkin_date: "bingHctCheckinDate",
        hct_checkout_date: "bingHctCheckoutDate",
        hct_length_of_stay: "bingHctLengthOfStay",
        hct_partner_hotel_id: "bingHctPartnerHotelId",
        hct_total_price: "bingHctTotalPrice",
        hct_pagetype: "bingHctPagetype",
      });
    } else if (data.bingEventType === "travel") {
      includePropsFromData({
        travel_destid: "bingTravelDestid",
        travel_originid: "bingTravelOriginid",
        travel_pagetype: "bingTravelPagetype",
        travel_startdate: "bingTravelStartdate",
        travel_enddate: "bingTravelEnddate",
        travel_totalvalue: "bingTravelTotalvalue",
      });
    }
  } else if (data.bingEventType === "userDefined") {
    eventName = data.bingCustomEventAction || "";
    props.action = eventName;
    props.label = "";
  } 
  
  track(eventName, props, options);

  data.gtmOnSuccess();
};

const processImpactEvent = () => {
  const options = generateOptions("impactdotcom");

  // make track call
  const props = parseParamTable(data.impactOtherEventParameters || []);

  if (data.impactEventTypeIdOrCodeSelector === "event_type_code") {
    props.event_type_code = data.impactEventTypeIdOrCode;
  } else {
    props.event_type_id = data.impactEventTypeIdOrCode;
  }

  props.order_id = data.impactOrderId;

  // Convert items, if any, to json object
  if (props.items) {
    props.items = JSON.parse(props.items);
    if (!props.items) {
      log("ERROR: Freshpaint impact.com GTM Template parsing items json: " + props.items);

      data.gtmOnFailure();
      return;
    }
  }

  track(data.impactEventTypeIdOrCode, props, options);

  data.gtmOnSuccess();
};

const processGoogleAdsEvent = () => {
  const options = generateOptions("Google AdWords New");

  // make track call

  if (data.commonEventName && data.googleAdsConversionLabel) {
    const props = {};

    props.conversion_label = data.googleAdsConversionLabel;

    // conversion_id is optional override to freshpaint-configured one for destination
    if (data.googleAdsConversionId) {
        props.conversion_id = data.googleAdsConversionId;
    }

    if (data.googleAdsConversionValue) {
        props.value = data.googleAdsConversionValue;
    }
    if (data.googleAdsOrderId) {
        props.transaction_id = data.googleAdsOrderId;
    }
    if (data.googleAdsCurrencyCode) {
        props.currency = data.googleAdsCurrencyCode;
    }

    track(data.commonEventName, props, options);

    data.gtmOnSuccess();
  } else {
    log("ERROR: Freshpaint Google Ads GTM Template missing eventNme and / or conversionLabel");
    data.gtmOnFailure();
  }
};

const processGoogleAdsCallConversionsEvent = () => {
  let tagIdConversionLabel = "AW-" + data.googleAdsCallConversionsConversionId + "/" + data.googleAdsConversionLabel;

  registerCallConversion(tagIdConversionLabel, data.googleAdsCallConversionsDisplayedPhoneNbr);

  data.gtmOnSuccess();
};

const processTheTradeDeskEvent = () => {
  const options = generateOptions("theTradeDesk");

  // make track call

  if (data.commonEventName && data.theTradeDeskTrackerOrUPixelIDValue) {
    const props = parseParamTable(data.theTradeDeskTDEventParameters || []);

    if (data.theTradeDeskTrackerOrUPixel === "tracker_id") {
      props.tracker_id = data.theTradeDeskTrackerOrUPixelIDValue;
    } else {
      // Not currently exercised since upixel_id is disabled from UI control, for now
      props.upixel_id = data.theTradeDeskTrackerOrUPixelIDValue;
    }

    if (data.theTradeDeskEventName) {
      props.ttd_event_name = data.theTradeDeskEventName;
    }

    if (data.theTradeDeskValue) {
      props.value = data.theTradeDeskValue;
    }

    if (data.theTradeDeskCurrency) {
      props.currency = data.theTradeDeskCurrency;
    }

    if (data.theTradeDeskOrderId) {
      props.order_id = data.theTradeDeskOrderId;
    }

    if (data.commonDestConfigNames) {
      props.dest_config_names = data.commonDestConfigNames;
    }

    if (data.theTradeDeskItems) {
      props.items = JSON.parse(data.theTradeDeskItems);
      if (!props.items) {
        log("ERROR: Freshpaint theTradeDesk GTM Template parsing items json: " + data.theTradeDeskItems);

        data.gtmOnFailure();
        return;
      }
    }

    track(data.commonEventName, props, options);

    data.gtmOnSuccess();
  } else {
    log("ERROR: Freshpaint theTradeDesk GTM Template missing eventNme and / or trackerOrUPixelIDValue");
    data.gtmOnFailure();
  }
};

const processStackAdaptEvent = () => {
  const options = generateOptions("StackAdapt");

  if (data.commonEventName && data.stackAdaptConversionEventID) {
    const props = parseSimpleTable(data.commonEventProperties || []);

    props.conversion_id = data.stackAdaptConversionEventID;

    track(data.commonEventName, props, options);

    data.gtmOnSuccess();
  } else {
    log("ERROR: Freshpaint StackAdapt GTM Template missing eventName and / or stackAdaptConversionEventID");
    data.gtmOnFailure();
  }
};

const callFreshpaintProxy = (cmdName, args) => {
  return callInWindow("_freshpaint_gtm_proxy", cmdName, args);
};

const identify = (userID, props, options) => {
  let args = [props, options];
  if (userID) {
    args = [userID].concat(args);
  }
  callFreshpaintProxy("apply", {
    envID: undefined,
    methodName: "identify",
    methodArgs: args,
  });
};

const track = (eventName, props, options) => {
  callFreshpaintProxy("apply", {
    envID: undefined,
    methodName: "track",
    methodArgs: [eventName, props, options],
  });
};

const page = (pageProps, options) => {
  callFreshpaintProxy("apply", {
    envID: undefined,
    methodName: "page",
    methodArgs: [pageProps, options],
  });
};

const addEventProperties = (props) => {
  // register is the exposed sdk instance name for addEventProperties
  callFreshpaintProxy("apply", {
    envID: undefined,
    methodName: "register",
    methodArgs: [props],
  });
};

const registerCallConversion = (tagIdConversionLabel, phoneNbr) => {
  callFreshpaintProxy("apply", {
    envID: data.envID,
    methodName: "registerCallConversion",
    methodArgs: [tagIdConversionLabel, phoneNbr],
  });
};

const JS_URL = "https://perfalytics.com/static/js/freshpaint-gtm.js";

if (!callFreshpaintProxy("isLoaded")) {
  injectScript(JS_URL, processEvent, data.gtmOnFailure, "freshpaint_gtm_proxy");
} else {
  processEvent();
}


___WEB_PERMISSIONS___

[
  {
    "instance": {
      "key": {
        "publicId": "access_globals",
        "versionId": "1"
      },
      "param": [
        {
          "key": "keys",
          "value": {
            "type": 2,
            "listItem": [
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "key"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  },
                  {
                    "type": 1,
                    "string": "execute"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "_freshpaint_gtm_proxy"
                  },
                  {
                    "type": 8,
                    "boolean": false
                  },
                  {
                    "type": 8,
                    "boolean": false
                  },
                  {
                    "type": 8,
                    "boolean": true
                  }
                ]
              }
            ]
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "inject_script",
        "versionId": "1"
      },
      "param": [
        {
          "key": "urls",
          "value": {
            "type": 2,
            "listItem": [
              {
                "type": 1,
                "string": "https://perfalytics.com/*"
              }
            ]
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "logging",
        "versionId": "1"
      },
      "param": [
        {
          "key": "environments",
          "value": {
            "type": 1,
            "string": "all"
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  }
]


___TESTS___

scenarios: []


___NOTES___

Created on 29/03/2023, 15:36:11


